<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
  <title>
    
    Hackerrank - DigitalWallet 丨
    

    typo
  </title>

  
  <link rel="shortcut icon" href="/icon.svg">
  

  <link rel="preconnect" href="https://cdnjs.cloudflare.com">
  
  <link id="theme" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-light.css">
  <script src="https://unpkg.com/@highlightjs/cdn-assets@11.9.0/highlight.min.js"></script>
  

  <!-- 字体 -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap" rel="stylesheet">

  
<link rel="stylesheet" href="/css/root.css">

  
<link rel="stylesheet" href="/css/style.css">

  
<link rel="stylesheet" href="/css/post.css">

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <header class="header">
  <section class="header-container">
    <a class="logo" href="/">Tech blog</a>
    <ul class="nav">
      
      <li><a href="/archives">archives</a></li>
      
      <li><a href="/about">about</a></li>
      
    </ul>
  </section>
</header>
  <main class="main">
    <article class="post">
  
  <div class="post-title">Hackerrank - DigitalWallet</div>
  <div class="post-meta">
    <div class="date">2022 December 2nd</div>
    <div class="tags">
      
    </div>
  </div>
  

  <main class="post-content"><h1 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h1><p>Digital wallets have made sending and receiving money easier, but they require authentication. A user must have an access token to initiate transactions in this digital wallet system. There are two types of transactions:</p>
<blockquote>
<p>Adding money to the wallet.<br>Paying money from the wallet.</p>
</blockquote>
<p>Both the transactions are validated before being processed. For an invalid transaction the following error code and the error message are displayed:</p>
<blockquote>
<p>USER_NOT_AUTHORIZED: The error code reports the unauthorized transaction, i.e., if there is no access token for the digital wallet. The error message should be User not authorized.<br>INVALID_AMOUNT: The error code reports the attempt of adding or paying zero or negative amount. The error message should be Amount should be greater than zero.<br>INSUFFICIENT_BALANCE: The error code reports the attempt of making a payment greater than the available digital wallet balance. The error message should be Insufficient balance.</p>
</blockquote>
<p>In this challenge, you are building the digital wallet workflow by writing the complete implementation of the following three classes:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">The TransactionException class should implement:</span><br><span class="line">    The constructor TransactionException(String errorMessage, String errorCode).</span><br><span class="line">    The method String getErrorCode() to return the error code of the exception being thrown.</span><br><span class="line">The DigitalWallet class should implement:</span><br><span class="line">    The constructor DigitalWallet(String walletId, String userName).</span><br><span class="line">    The constructor DigitalWallet(String walletId, String userName, String userAccessCode).</span><br><span class="line">    The method String getWalletId() to return the wallet ID.</span><br><span class="line">    The method String getUserName() to return the owner&#x27;s username.</span><br><span class="line">    The method String getUserAccessToken() to return the access token.</span><br><span class="line">    The method int getWalletBalance() to return the wallet balance.</span><br><span class="line">    The method void setWalletBalance(int walletBalance) to update the wallet balance.</span><br><span class="line">The DigitalWalletTransaction class should implement:</span><br><span class="line">    The method void addMoney(DigitalWallet digitalWallet, int amount) to add money to the wallet. It should also throw the required exceptions for any invalid transactions.</span><br><span class="line">    The method void payMoney(DigitalWallet digitalWallet, int amount) to make a payment from the wallet. It should also throw the required exceptions for any invalid transactions.</span><br></pre></td></tr></table></figure>

<p>The locked stub code in the editor validates the correctness of the TransactionException, DigitalWallet, and DigitalWalletTransaction class implementations by first creating the authorized and unauthorized digital wallets and then processing the following two type of transactions:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">walletId add amount: This transaction is handled by the method DigitalWalletTransaction.addMoney(digitalWallet, amount).</span><br><span class="line">walletId pay amount: This transaction is handled by the method DigitalWalletTransaction.payMoney(digitalWallet, amount).</span><br></pre></td></tr></table></figure>

<p>After processing all the queries, the locked stub code prints the wallet ID, username, and the balance amount for each of the digital wallets.</p>
<pre><code>Constraints
1 ≤ numberOfWallets ≤ 100
1 ≤ numberOfTransactions ≤ 2 × 103

Input Format For Custom Testing
The first line contains the value of numberOfWallets describing the total number of wallets.
The next numberOfWallets lines contain the required information of the wallets.
The next line contains the value of numberOfTransactions describing the total number of transactions.
The next numberOfTransactions lines contains one of the above-mentioned two transactions.

Sample Case
Sample Input For Custom Testing
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">1 Julia bff834a2c117a76d9ceb782f98e428686ca3c4ea</span><br><span class="line">2 Samantha</span><br><span class="line">10</span><br><span class="line">1 pay 50</span><br><span class="line">1 add 100</span><br><span class="line">1 add 0</span><br><span class="line">1 pay 30</span><br><span class="line">2 add 500</span><br><span class="line">1 add -5</span><br><span class="line">1 add 1000</span><br><span class="line">1 pay -20</span><br><span class="line">1 pay 100</span><br><span class="line">1 add 720</span><br></pre></td></tr></table></figure>

<pre><code>Sample Output
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">INSUFFICIENT_BALANCE: Insufficient balance.</span><br><span class="line">Wallet successfully credited.</span><br><span class="line">INVALID_AMOUNT: Amount should be greater than zero.</span><br><span class="line">Wallet successfully debited.</span><br><span class="line">USER_NOT_AUTHORIZED: User not authorized.</span><br><span class="line">INVALID_AMOUNT: Amount should be greater than zero.</span><br><span class="line">Wallet successfully credited.</span><br><span class="line">INVALID_AMOUNT: Amount should be greater than zero.</span><br><span class="line">Wallet successfully debited.</span><br><span class="line">Wallet successfully credited.</span><br><span class="line">1 Julia 1690</span><br><span class="line">2 Samantha 0</span><br></pre></td></tr></table></figure>

<p>Explanation</p>
<blockquote>
<p>For each of the invalid transactions made by Julia, required exceptions are thrown. The invalid transactions are: 1 pay 50, 1 add 0, 1 add -5, and 1 pay -20. After processing all the transactions the balance amount is 1690.<br>Samantha did not provide an access token, so she cannot initiate any transactions in the digital wallet. No transactions occur in her wallet, and the USER_NOT_AUTHORIZED exception was thrown as required for the transaction 2 add 500.</p>
</blockquote>
<h1 id="解法"><a href="#解法" class="headerlink" title="解法"></a>解法</h1><p>以下是需要实现的3个class：</p>
<ol>
<li>TransactionException</li>
<li>DigitalWallet</li>
<li>DigitalWalletTransaction</li>
</ol>
<p>The below answer is provided by <a target="_blank" rel="noopener" href="https://gist.github.com/andersonmo/7dfe346ae2b24cfbc6783219e08caded">this gist</a>.</p>
<h1 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h1><p>Exception class:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">class TransactionException extends Exception &#123;</span><br><span class="line"></span><br><span class="line">    String errorCode;</span><br><span class="line"></span><br><span class="line">    TransactionException(String errorMessage, String errorCode) &#123;</span><br><span class="line">        super(errorMessage);</span><br><span class="line">        this.errorCode = errorCode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getErrorCode() &#123;</span><br><span class="line">        return errorCode;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Wallet class:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">class DigitalWallet &#123;</span><br><span class="line"></span><br><span class="line">    String walletId, userName, userAccessCode;</span><br><span class="line">    int walletBalance;</span><br><span class="line"></span><br><span class="line">    public DigitalWallet(String walletId, String userName) &#123;</span><br><span class="line">        this.walletId = walletId;</span><br><span class="line">        this.userName = userName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public DigitalWallet(String walletId, String userName, String userAccessCode) &#123;</span><br><span class="line">        this.walletId = walletId;</span><br><span class="line">        this.userName = userName;</span><br><span class="line">        this.userAccessCode = userAccessCode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getWalletId() &#123;</span><br><span class="line">        return walletId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getUsername() &#123;</span><br><span class="line">        return userName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getUserAccessToken() &#123;</span><br><span class="line">        return userAccessCode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getWalletBalance() &#123;</span><br><span class="line">        return walletBalance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setWalletBalance(int walletBalance) &#123;</span><br><span class="line">        this.walletBalance = walletBalance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Transaction class:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">class DigitalWalletTransaction &#123;</span><br><span class="line"></span><br><span class="line">    public void addMoney(DigitalWallet digitalWallet, int amount) throws TransactionException &#123;</span><br><span class="line">        if (digitalWallet.getUserAccessToken() == null) &#123;</span><br><span class="line">            throw new TransactionException(&quot;User not authorized&quot;, &quot;USER_NOT_AUTHORIZED&quot;);</span><br><span class="line">        &#125; else if (amount &lt;= 0) &#123;</span><br><span class="line">            throw new TransactionException(&quot;Amount should be greater than zero&quot;, &quot;INVALID_AMOUNT&quot;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            digitalWallet.setWalletBalance(digitalWallet.getWalletBalance() + amount);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void payMoney(DigitalWallet digitalWallet, int amount) throws TransactionException &#123;</span><br><span class="line">        if (digitalWallet.getWalletBalance() &lt; amount) &#123;</span><br><span class="line">            throw new TransactionException(&quot;Insufficient balance&quot;, &quot;INSUFFICIENT_BALANCE&quot;);</span><br><span class="line">        &#125; else if (digitalWallet.getUserAccessToken() == null) &#123;</span><br><span class="line">            throw new TransactionException(&quot;User not authorized&quot;, &quot;USER_NOT_AUTHORIZED&quot;);</span><br><span class="line">        &#125; else if (amount &lt;= 0) &#123;</span><br><span class="line">            throw new TransactionException(&quot;Amount should be greater than zero&quot;, &quot;INVALID_AMOUNT&quot;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            digitalWallet.setWalletBalance(digitalWallet.getWalletBalance() - amount);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最后，我们进行测试：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">package com.hackerrank;</span><br><span class="line"></span><br><span class="line">import java.util.HashMap;</span><br><span class="line">import java.util.Map;</span><br><span class="line">import java.util.Scanner;</span><br><span class="line"></span><br><span class="line">public class TestDigitalWallet &#123;</span><br><span class="line"></span><br><span class="line">    private static final Scanner INPUT_READER = new Scanner(System.in);</span><br><span class="line">    private static final DigitalWalletTransaction DIGITAL_WALLET_TRANSACTION = new DigitalWalletTransaction();</span><br><span class="line"></span><br><span class="line">    private static final Map&lt;String, DigitalWallet&gt; DIGITAL_WALLETS = new HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        int numberOfWallets = Integer.parseInt(INPUT_READER.nextLine());</span><br><span class="line">        while (numberOfWallets-- &gt; 0) &#123;</span><br><span class="line">            String[] wallet = INPUT_READER.nextLine().split(&quot; &quot;);</span><br><span class="line">            DigitalWallet digitalWallet;</span><br><span class="line"></span><br><span class="line">            if (wallet.length == 2) &#123;</span><br><span class="line">                digitalWallet = new DigitalWallet(wallet[0], wallet[1]);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                digitalWallet = new DigitalWallet(wallet[0], wallet[1], wallet[2]);</span><br><span class="line">            &#125;</span><br><span class="line">            DIGITAL_WALLETS.put(wallet[0], digitalWallet);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;=========================================&quot;);</span><br><span class="line">        System.out.println(&quot;START printing transactions...&quot;);</span><br><span class="line">        int numberOfTransactions = Integer.parseInt(INPUT_READER.nextLine());</span><br><span class="line">        while (numberOfTransactions-- &gt; 0) &#123;</span><br><span class="line">            String[] transaction = INPUT_READER.nextLine().split(&quot; &quot;);</span><br><span class="line">            DigitalWallet digitalWallet = DIGITAL_WALLETS.get(transaction[0]);</span><br><span class="line"></span><br><span class="line">            if (transaction[1].equals(&quot;add&quot;)) &#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    DIGITAL_WALLET_TRANSACTION.addMoney(digitalWallet, Integer.parseInt(transaction[2]));</span><br><span class="line">                    System.out.println(&quot;Wallet successfully credited.&quot;);</span><br><span class="line">                &#125; catch (TransactionException ex) &#123;</span><br><span class="line">                    System.out.println(ex.getErrorCode() + &quot;: &quot; + ex.getMessage() + &quot;.&quot;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    DIGITAL_WALLET_TRANSACTION.payMoney(digitalWallet, Integer.parseInt(transaction[2]));</span><br><span class="line">                    System.out.println(&quot;Wallet successfully debited.&quot;);</span><br><span class="line">                &#125; catch (TransactionException ex) &#123;</span><br><span class="line">                    System.out.println(ex.getErrorCode() + &quot;: &quot; + ex.getMessage() + &quot;.&quot;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;END of transactions&quot;);</span><br><span class="line">        System.out.println(&quot;=========================================&quot;);</span><br><span class="line">        System.out.println(&quot;Wallet details as follows&quot;);</span><br><span class="line"></span><br><span class="line">        DIGITAL_WALLETS.keySet()</span><br><span class="line">            .stream()</span><br><span class="line">            .sorted()</span><br><span class="line">            .map((digitalWalletId) -&gt; DIGITAL_WALLETS.get(digitalWalletId))</span><br><span class="line">            .forEachOrdered((digitalWallet) -&gt; &#123;</span><br><span class="line">                System.out.println(digitalWallet.getWalletId()</span><br><span class="line">                    + &quot; &quot; + digitalWallet.getUsername()</span><br><span class="line">                    + &quot; &quot; + digitalWallet.getWalletBalance());</span><br><span class="line">            &#125;);</span><br><span class="line">        System.out.println(&quot;=========================================&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</main>

</article>


<script src="/js/highlight.js"></script>

  </main>
  <footer class="footer">
  
  <span>Copyright © 2024 typo</span>
  
</footer>
  
<script src="/js/theme.js"></script>

</body>

</html>