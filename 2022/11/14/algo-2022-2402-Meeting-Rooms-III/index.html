<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">





<title>2402. Meeting Rooms III | Tech blog</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


<meta name="generator" content="Hexo 7.3.0"></head>

<body>
    <script>
        // this function is used to check current theme before page loaded.
        (() => {
            const pagebody = document.getElementsByTagName('body')[0]

            function setTheme(status) {

                if (status === 'dark') {
                    window.sessionStorage.theme = 'dark'
                    pagebody.classList.add('dark-theme');

                } else if (status === 'light') {
                    window.sessionStorage.theme = 'light'
                    pagebody.classList.remove('dark-theme');
                }
            };

            setTheme(window.sessionStorage.theme)
        })();
    </script>

    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Bentham&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                <a class="menu-item" href="/archives">Posts</a>
                
                <a class="menu-item" href="/category">Categories</a>
                
                <a class="menu-item" href="/tag">Tags</a>
                
                <a class="menu-item" href="/about">About</a>
                
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">Bentham&#39;s Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">
                    <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M4.5 17.27q-.213 0-.356-.145T4 16.768t.144-.356t.356-.143h15q.213 0 .356.144q.144.144.144.357t-.144.356t-.356.143zm0-4.77q-.213 0-.356-.144T4 11.999t.144-.356t.356-.143h15q.213 0 .356.144t.144.357t-.144.356t-.356.143zm0-4.77q-.213 0-.356-.143Q4 7.443 4 7.23t.144-.356t.356-.143h15q.213 0 .356.144T20 7.23t-.144.356t-.356.144z"/></svg>
                    <svg class="close-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><!-- Icon from Material Symbols Light by Google - https://github.com/google/material-design-icons/blob/master/LICENSE --><path fill="currentColor" d="m12 12.708l-5.246 5.246q-.14.14-.344.15t-.364-.15t-.16-.354t.16-.354L11.292 12L6.046 6.754q-.14-.14-.15-.344t.15-.364t.354-.16t.354.16L12 11.292l5.246-5.246q.14-.14.345-.15q.203-.01.363.15t.16.354t-.16.354L12.708 12l5.246 5.246q.14.14.15.345q.01.203-.15.363t-.354.16t-.354-.16z"/></svg>
                </div>
            </div>
            <div class="menu" id="mobile-menu">
                
                <a class="menu-item" href="/archives">Posts</a>
                
                <a class="menu-item" href="/category">Categories</a>
                
                <a class="menu-item" href="/tag">Tags</a>
                
                <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if (toggleMenu.classList.contains("active")) {
            toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        } else {
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
            <div class="main">
                <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    var tocbot_timer;
    var DEPTH_MAX = 6; // 为 6 时展开所有
    var tocbot_default_config = {
        tocSelector: '.tocbot-list',
        contentSelector: '.post-content',
        headingSelector: 'h1, h2, h3, h4, h5',
        orderedList: false,
        scrollSmooth: true,
        onClick: extend_click,
    };

    function extend_click() {
        clearTimeout(tocbot_timer);
        tocbot_timer = setTimeout(function() {
            tocbot.refresh(obj_merge(tocbot_default_config, {
                hasInnerContainers: true
            }));
        }, 420); // 这个值是由 tocbot 源码里定义的 scrollSmoothDuration 得来的
    }

    document.ready(function() {
        tocbot.init(obj_merge(tocbot_default_config, {
            collapseDepth: 1
        }));
    });

    function expand_toc() {
        var b = document.querySelector('.tocbot-toc-expand');
        var expanded = b.getAttribute('data-expanded');
        expanded ? b.removeAttribute('data-expanded') : b.setAttribute('data-expanded', true);
        tocbot.refresh(obj_merge(tocbot_default_config, {
            collapseDepth: expanded ? 1 : DEPTH_MAX
        }));
        b.innerText = expanded ? 'Expand all' : 'Collapse all';
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

    function obj_merge(target, source) {
        for (var item in source) {
            if (source.hasOwnProperty(item)) {
                target[item] = source[item];
            }
        }
        return target;
    }
</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">2402. Meeting Rooms III</h1>
            
                <div class="post-meta">
                    

                    
                        <span class="post-time">
                        Date: <a href="#">November 14, 2022&nbsp;&nbsp;0:08:00</a>
                        </span>
                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/categories/Leetcode/">Leetcode</a>
                            
                        </span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <p>Link: <a target="_blank" rel="noopener" href="https://leetcode.cn/problems/meeting-rooms-iii/">https://leetcode.cn/problems/meeting-rooms-iii/</a></p>
<h1 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h1><p>difficulty: hard<br>adj diff: 4</p>
<pre><code>You are given an integer n. There are n rooms numbered from 0 to n - 1.

You are given a 2D integer array meetings where meetings[i] = [starti, endi] means that a meeting will be held during the half-closed time interval [starti, endi). All the values of starti are unique.

Meetings are allocated to rooms in the following manner:

Each meeting will take place in the unused room with the lowest number.
If there are no available rooms, the meeting will be delayed until a room becomes free. The delayed meeting should have the same duration as the original meeting.
When a room becomes unused, meetings that have an earlier original start time should be given the room.
Return the number of the room that held the most meetings. If there are multiple rooms, return the room with the lowest number.

A half-closed interval [a, b) is the interval between a and b including a and not including b.

 

Example 1:

Input: n = 2, meetings = [[0,10],[1,5],[2,7],[3,4]]
Output: 0
Explanation:
- At time 0, both rooms are not being used. The first meeting starts in room 0.
- At time 1, only room 1 is not being used. The second meeting starts in room 1.
- At time 2, both rooms are being used. The third meeting is delayed.
- At time 3, both rooms are being used. The fourth meeting is delayed.
- At time 5, the meeting in room 1 finishes. The third meeting starts in room 1 for the time period [5,10).
- At time 10, the meetings in both rooms finish. The fourth meeting starts in room 0 for the time period [10,11).
Both rooms 0 and 1 held 2 meetings, so we return 0.
Example 2:

Input: n = 3, meetings = [[1,20],[2,10],[3,5],[4,9],[6,8]]
Output: 1
Explanation:
- At time 1, all three rooms are not being used. The first meeting starts in room 0.
- At time 2, rooms 1 and 2 are not being used. The second meeting starts in room 1.
- At time 3, only room 2 is not being used. The third meeting starts in room 2.
- At time 4, all three rooms are being used. The fourth meeting is delayed.
- At time 5, the meeting in room 2 finishes. The fourth meeting starts in room 2 for the time period [5,10).
- At time 6, all three rooms are being used. The fifth meeting is delayed.
- At time 10, the meetings in rooms 1 and 2 finish. The fifth meeting starts in room 1 for the time period [10,12).
Room 0 held 1 meeting while rooms 1 and 2 each held 2 meetings, so we return 1.
 

Constraints:

1 &lt;= n &lt;= 100
1 &lt;= meetings.length &lt;= 105
meetings[i].length == 2
0 &lt;= starti &lt; endi &lt;= 5 * 105
All the values of starti are unique.
</code></pre>
<p>这道题的算法并不算非常难：双 Heap。</p>
<ol>
<li>一个用来存放 空 room</li>
<li>另一个用来存放 正在进行的 meeting</li>
</ol>
<p>难点来了：那就是 自定义 comparator。</p>
<ol>
<li>对于正在进行 meeting 的 heap，implements Comparable<Meeting> 然后定义 compareTo 方法，根据 endTime 从小到大排列。</li>
<li>对于空 room，需要重新自定义一个 comparator()，根据 Room Index 来排列。</li>
</ol>
<h2 id="Comparable-Vs-Comparator"><a href="#Comparable-Vs-Comparator" class="headerlink" title="Comparable Vs Comparator"></a>Comparable Vs Comparator</h2><p>所以，看懂 Comparable 和 Comparator 的区别了吗？</p>
<ol>
<li>Comparable 是一个<strong>内比较器</strong> 的接口。用于 object 自己跟自己比较。</li>
<li>Comparator 是一个<strong>外比较器</strong>，用于：<ol>
<li>一个 object 没有 implement Comparable，例如 int[]</li>
<li>实现了 Comparable，但是我们还想自定义一下</li>
</ol>
</li>
</ol>
<h1 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h1><p>Code 1 （同时使用 Comparable 和 Comparator，不太推荐）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">    public int mostBooked(int n, int[][] meetings) &#123;</span><br><span class="line">        int[] usedTime = new int[n];</span><br><span class="line"></span><br><span class="line">        // idleRooms: heap, ranked by room index number</span><br><span class="line">        Queue&lt;Meeting&gt; idleRooms = new PriorityQueue&lt;Meeting&gt;(new Comparator&lt;Meeting&gt;() &#123;</span><br><span class="line">            public int compare(Meeting m1, Meeting m2) &#123;</span><br><span class="line">                return m1.roomNumber - m2.roomNumber;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        for (int i = 0; i &lt; n; i++) &#123;</span><br><span class="line">            idleRooms.offer( new Meeting(i) );</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // inProgress: heap, ranked by meeting endTime</span><br><span class="line">        Queue&lt;Meeting&gt; inProgress = new PriorityQueue&lt;Meeting&gt;();</span><br><span class="line">        Arrays.sort(meetings, new Comparator&lt;int[]&gt;() &#123;</span><br><span class="line">            public int compare(int[] meeting1, int[] meeting2) &#123;</span><br><span class="line">                return meeting1[0] - meeting2[0];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        // in time-order, do the following:</span><br><span class="line">        // 1. get the next meeting (start time = T)</span><br><span class="line">        // 2. end meetings in inProgress, whose endTime is before T</span><br><span class="line">        // 3. fetch the next avaible room from idleRooms</span><br><span class="line">        // 4. start the meeting</span><br><span class="line">        for (int i = 0; i &lt; meetings.length; i++) &#123;</span><br><span class="line">            Meeting temp;</span><br><span class="line">            while (!inProgress.isEmpty() &amp;&amp; inProgress.peek().endTime &lt;= meetings[i][0]) &#123;</span><br><span class="line">                temp = inProgress.poll();</span><br><span class="line">                idleRooms.offer(temp);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            // if no room is idle, then meetings[i] would need to wait</span><br><span class="line">            long currentMeetingWaitTime = 0;</span><br><span class="line">            if (idleRooms.isEmpty()) &#123;</span><br><span class="line">                temp = inProgress.poll();</span><br><span class="line">                idleRooms.offer(temp);</span><br><span class="line">                currentMeetingWaitTime = temp.endTime - meetings[i][0];</span><br><span class="line">            &#125;</span><br><span class="line">            temp = idleRooms.poll();</span><br><span class="line">            ++usedTime[temp.roomNumber];</span><br><span class="line"></span><br><span class="line">            temp.endTime = meetings[i][1] + currentMeetingWaitTime;</span><br><span class="line">            inProgress.offer(temp);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // All meetings are finished, now count</span><br><span class="line">        int mostUsedRoomNumber = 0;</span><br><span class="line">        for (int i = 1; i &lt; n; i++) &#123;</span><br><span class="line">            if (usedTime[i] &gt; usedTime[mostUsedRoomNumber]) &#123;</span><br><span class="line">                mostUsedRoomNumber = i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return mostUsedRoomNumber;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Meeting implements Comparable&lt;Meeting&gt; &#123;</span><br><span class="line">    int roomNumber;</span><br><span class="line">    long endTime;</span><br><span class="line"></span><br><span class="line">    public Meeting(int num) &#123;</span><br><span class="line">        roomNumber = num;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int compareTo(Meeting m) &#123;</span><br><span class="line">        if (this.endTime == m.endTime) &#123;</span><br><span class="line">            return this.roomNumber - m.roomNumber;</span><br><span class="line">        &#125;</span><br><span class="line">        return Long.compare(this.endTime, m.endTime) ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Code 2 （只用 Comparator，推荐）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">    public int mostBooked(int n, int[][] meetings) &#123;</span><br><span class="line">        int[] usedTime = new int[n];</span><br><span class="line"></span><br><span class="line">        // idleRooms: heap, ranked by room index number</span><br><span class="line">        Queue&lt;Meeting&gt; idleRooms = new PriorityQueue&lt;Meeting&gt;(new Comparator&lt;Meeting&gt;() &#123;</span><br><span class="line">            public int compare(Meeting m1, Meeting m2) &#123;</span><br><span class="line">                return m1.roomNumber - m2.roomNumber;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        for (int i = 0; i &lt; n; i++) &#123;</span><br><span class="line">            idleRooms.offer( new Meeting(i) );</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // inProgress: heap, ranked by meeting endTime</span><br><span class="line">        Queue&lt;Meeting&gt; inProgress = new PriorityQueue&lt;Meeting&gt;(new Comparator&lt;Meeting&gt;() &#123;</span><br><span class="line">            public int compare(Meeting m1, Meeting m2) &#123;</span><br><span class="line">                if (m1.endTime == m2.endTime) &#123;</span><br><span class="line">                    return m1.roomNumber - m2.roomNumber;</span><br><span class="line">                &#125;</span><br><span class="line">                return Long.compare(m1.endTime, m2.endTime);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        Arrays.sort(meetings, new Comparator&lt;int[]&gt;() &#123;</span><br><span class="line">            public int compare(int[] meeting1, int[] meeting2) &#123;</span><br><span class="line">                return meeting1[0] - meeting2[0];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        // in time-order, do the following:</span><br><span class="line">        // 1. get the next meeting (start time = T)</span><br><span class="line">        // 2. end meetings in inProgress, whose endTime is before T</span><br><span class="line">        // 3. fetch the next avaible room from idleRooms</span><br><span class="line">        // 4. start the meeting</span><br><span class="line">        for (int i = 0; i &lt; meetings.length; i++) &#123;</span><br><span class="line">            Meeting temp;</span><br><span class="line">            while (!inProgress.isEmpty() &amp;&amp; inProgress.peek().endTime &lt;= meetings[i][0]) &#123;</span><br><span class="line">                temp = inProgress.poll();</span><br><span class="line">                idleRooms.offer(temp);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            // if no room is idle, then meetings[i] would need to wait</span><br><span class="line">            long currentMeetingWaitTime = 0;</span><br><span class="line">            if (idleRooms.isEmpty()) &#123;</span><br><span class="line">                temp = inProgress.poll();</span><br><span class="line">                idleRooms.offer(temp);</span><br><span class="line">                currentMeetingWaitTime = temp.endTime - meetings[i][0];</span><br><span class="line">            &#125;</span><br><span class="line">            temp = idleRooms.poll();</span><br><span class="line">            ++usedTime[temp.roomNumber];</span><br><span class="line"></span><br><span class="line">            temp.endTime = meetings[i][1] + currentMeetingWaitTime;</span><br><span class="line">            inProgress.offer(temp);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // All meetings are finished, now count</span><br><span class="line">        int mostUsedRoomNumber = 0;</span><br><span class="line">        for (int i = 1; i &lt; n; i++) &#123;</span><br><span class="line">            if (usedTime[i] &gt; usedTime[mostUsedRoomNumber]) &#123;</span><br><span class="line">                mostUsedRoomNumber = i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return mostUsedRoomNumber;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Meeting &#123;</span><br><span class="line">    int roomNumber;</span><br><span class="line">    long endTime;</span><br><span class="line"></span><br><span class="line">    public Meeting(int num) &#123;</span><br><span class="line">        roomNumber = num;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Code 3，简略版。也就是 idleRooms 直接 &#x3D; new PriorityQueue<Integer>() 。可以少写一个 Comparator），代码短很多。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">    public int mostBooked(int n, int[][] meetings) &#123;</span><br><span class="line">        int[] usedTime = new int[n];</span><br><span class="line">        Queue&lt;Integer&gt; idleRooms = new PriorityQueue&lt;Integer&gt;();</span><br><span class="line">        for (int i = 0; i &lt; n; i++) &#123;</span><br><span class="line">            idleRooms.offer(i);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // inProgress: heap, ranked by meeting endTime</span><br><span class="line">        Queue&lt;Meeting&gt; inProgress = new PriorityQueue&lt;Meeting&gt;(new Comparator&lt;Meeting&gt;() &#123;</span><br><span class="line">            public int compare(Meeting m1, Meeting m2) &#123;</span><br><span class="line">                if (m1.endTime == m2.endTime) &#123;</span><br><span class="line">                    return m1.roomNumber - m2.roomNumber;</span><br><span class="line">                &#125;</span><br><span class="line">                return Long.compare(m1.endTime, m2.endTime);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        Arrays.sort(meetings, new Comparator&lt;int[]&gt;() &#123;</span><br><span class="line">            public int compare(int[] meeting1, int[] meeting2) &#123;</span><br><span class="line">                return meeting1[0] - meeting2[0];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        // in time-order, do the following:</span><br><span class="line">        // 1. get the next meeting (start time = T)</span><br><span class="line">        // 2. end meetings in inProgress, whose endTime is before T</span><br><span class="line">        // 3. fetch the next avaible room from idleRooms</span><br><span class="line">        // 4. start the meeting</span><br><span class="line">        for (int i = 0; i &lt; meetings.length; i++) &#123;</span><br><span class="line">            while (!inProgress.isEmpty() &amp;&amp; inProgress.peek().endTime &lt;= meetings[i][0]) &#123;</span><br><span class="line">                idleRooms.offer(inProgress.poll().roomNumber);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            // if no room is idle, then meetings[i] would need to wait</span><br><span class="line">            long currentMeetingWaitTime = 0;</span><br><span class="line">            if (idleRooms.isEmpty()) &#123;</span><br><span class="line">                currentMeetingWaitTime = inProgress.peek().endTime - meetings[i][0];</span><br><span class="line">                idleRooms.offer(inProgress.poll().roomNumber);</span><br><span class="line">            &#125;</span><br><span class="line">            Meeting startNewMeeting = new Meeting(</span><br><span class="line">                idleRooms.poll(),</span><br><span class="line">                meetings[i][1] + currentMeetingWaitTime</span><br><span class="line">            );</span><br><span class="line">            ++usedTime[startNewMeeting.roomNumber];</span><br><span class="line">            inProgress.offer(startNewMeeting);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // All meetings are finished, now count</span><br><span class="line">        int mostUsedRoomNumber = 0;</span><br><span class="line">        for (int i = 1; i &lt; n; i++) &#123;</span><br><span class="line">            if (usedTime[i] &gt; usedTime[mostUsedRoomNumber]) &#123;</span><br><span class="line">                mostUsedRoomNumber = i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return mostUsedRoomNumber;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Meeting &#123;</span><br><span class="line">    int roomNumber;</span><br><span class="line">    long endTime;</span><br><span class="line"></span><br><span class="line">    public Meeting(int num, long endTime) &#123;</span><br><span class="line">        this.roomNumber = num;</span><br><span class="line">        this.endTime = endTime;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>Permalink:</span>
                        <span><a href="https://mar2ndx.github.io/2022/11/14/algo-2022-2402-Meeting-Rooms-III/">https://mar2ndx.github.io/2022/11/14/algo-2022-2402-Meeting-Rooms-III/</a></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>License:</span>
                        <span>Copyright (c) 2019 <a target="_blank" rel="noopener" href="http://creativecommons.org/licenses/by-nc/4.0/">CC-BY-NC-4.0</a> LICENSE</span>
                    </p>
                
                
                     <p class="copyright-item">
                         <span>Slogan:</span>
                         <span>Do you believe in <strong>DESTINY</strong>?</span>
                     </p>
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2022/11/14/algo-2022-803-Bricks-Falling-When-Hit/">803. Bricks Falling When Hit</a>
            
            
            <a class="next" rel="next" href="/2022/11/14/algo-2022-683-K-Empty-Slots/">683. K Empty Slots</a>
            
        </section>


    </article>
</div>

            </div>
            <footer id="footer" class="footer">
    <div class="copyright">
        <span>©  | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
</body>

</html>