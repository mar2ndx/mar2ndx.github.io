<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">





<title>1152. Analyze User Website Visit Pattern | Tech blog</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


<meta name="generator" content="Hexo 7.3.0"></head>

<body>
    <script>
        // this function is used to check current theme before page loaded.
        (() => {
            const pagebody = document.getElementsByTagName('body')[0]

            function setTheme(status) {

                if (status === 'dark') {
                    window.sessionStorage.theme = 'dark'
                    pagebody.classList.add('dark-theme');

                } else if (status === 'light') {
                    window.sessionStorage.theme = 'light'
                    pagebody.classList.remove('dark-theme');
                }
            };

            setTheme(window.sessionStorage.theme)
        })();
    </script>

    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Bentham&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                <a class="menu-item" href="/archives">Posts</a>
                
                <a class="menu-item" href="/category">Categories</a>
                
                <a class="menu-item" href="/tag">Tags</a>
                
                <a class="menu-item" href="/about">About</a>
                
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">Bentham&#39;s Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">
                    <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M4.5 17.27q-.213 0-.356-.145T4 16.768t.144-.356t.356-.143h15q.213 0 .356.144q.144.144.144.357t-.144.356t-.356.143zm0-4.77q-.213 0-.356-.144T4 11.999t.144-.356t.356-.143h15q.213 0 .356.144t.144.357t-.144.356t-.356.143zm0-4.77q-.213 0-.356-.143Q4 7.443 4 7.23t.144-.356t.356-.143h15q.213 0 .356.144T20 7.23t-.144.356t-.356.144z"/></svg>
                    <svg class="close-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><!-- Icon from Material Symbols Light by Google - https://github.com/google/material-design-icons/blob/master/LICENSE --><path fill="currentColor" d="m12 12.708l-5.246 5.246q-.14.14-.344.15t-.364-.15t-.16-.354t.16-.354L11.292 12L6.046 6.754q-.14-.14-.15-.344t.15-.364t.354-.16t.354.16L12 11.292l5.246-5.246q.14-.14.345-.15q.203-.01.363.15t.16.354t-.16.354L12.708 12l5.246 5.246q.14.14.15.345q.01.203-.15.363t-.354.16t-.354-.16z"/></svg>
                </div>
            </div>
            <div class="menu" id="mobile-menu">
                
                <a class="menu-item" href="/archives">Posts</a>
                
                <a class="menu-item" href="/category">Categories</a>
                
                <a class="menu-item" href="/tag">Tags</a>
                
                <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if (toggleMenu.classList.contains("active")) {
            toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        } else {
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
            <div class="main">
                <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    var tocbot_timer;
    var DEPTH_MAX = 6; // 为 6 时展开所有
    var tocbot_default_config = {
        tocSelector: '.tocbot-list',
        contentSelector: '.post-content',
        headingSelector: 'h1, h2, h3, h4, h5',
        orderedList: false,
        scrollSmooth: true,
        onClick: extend_click,
    };

    function extend_click() {
        clearTimeout(tocbot_timer);
        tocbot_timer = setTimeout(function() {
            tocbot.refresh(obj_merge(tocbot_default_config, {
                hasInnerContainers: true
            }));
        }, 420); // 这个值是由 tocbot 源码里定义的 scrollSmoothDuration 得来的
    }

    document.ready(function() {
        tocbot.init(obj_merge(tocbot_default_config, {
            collapseDepth: 1
        }));
    });

    function expand_toc() {
        var b = document.querySelector('.tocbot-toc-expand');
        var expanded = b.getAttribute('data-expanded');
        expanded ? b.removeAttribute('data-expanded') : b.setAttribute('data-expanded', true);
        tocbot.refresh(obj_merge(tocbot_default_config, {
            collapseDepth: expanded ? 1 : DEPTH_MAX
        }));
        b.innerText = expanded ? 'Expand all' : 'Collapse all';
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

    function obj_merge(target, source) {
        for (var item in source) {
            if (source.hasOwnProperty(item)) {
                target[item] = source[item];
            }
        }
        return target;
    }
</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">1152. Analyze User Website Visit Pattern</h1>
            
                <div class="post-meta">
                    

                    
                        <span class="post-time">
                        Date: <a href="#">November 20, 2022&nbsp;&nbsp;3:12:00</a>
                        </span>
                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/categories/Leetcode/">Leetcode</a>
                            
                        </span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <p>Link: <a target="_blank" rel="noopener" href="https://leetcode.cn/problems/analyze-user-website-visit-pattern/">https://leetcode.cn/problems/analyze-user-website-visit-pattern/</a></p>
<h1 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h1><p>difficulty: mid<br>adj diff: 3</p>
<pre><code>You are given two string arrays username and website and an integer array timestamp. All the given arrays are of the same length and the tuple [username[i], website[i], timestamp[i]] indicates that the user username[i] visited the website website[i] at time timestamp[i].

A pattern is a list of three websites (not necessarily distinct).

    For example, [&quot;home&quot;, &quot;away&quot;, &quot;love&quot;], [&quot;leetcode&quot;, &quot;love&quot;, &quot;leetcode&quot;], and [&quot;luffy&quot;, &quot;luffy&quot;, &quot;luffy&quot;] are all patterns.

The score of a pattern is the number of users that visited all the websites in the pattern in the same order they appeared in the pattern.

    For example, if the pattern is [&quot;home&quot;, &quot;away&quot;, &quot;love&quot;], the score is the number of users x such that x visited &quot;home&quot; then visited &quot;away&quot; and visited &quot;love&quot; after that.
    Similarly, if the pattern is [&quot;leetcode&quot;, &quot;love&quot;, &quot;leetcode&quot;], the score is the number of users x such that x visited &quot;leetcode&quot; then visited &quot;love&quot; and visited &quot;leetcode&quot; one more time after that.
    Also, if the pattern is [&quot;luffy&quot;, &quot;luffy&quot;, &quot;luffy&quot;], the score is the number of users x such that x visited &quot;luffy&quot; three different times at different timestamps.

Return the pattern with the largest score. If there is more than one pattern with the same largest score, return the lexicographically smallest such pattern.

 

Example 1:

Input: username = [&quot;joe&quot;,&quot;joe&quot;,&quot;joe&quot;,&quot;james&quot;,&quot;james&quot;,&quot;james&quot;,&quot;james&quot;,&quot;mary&quot;,&quot;mary&quot;,&quot;mary&quot;], timestamp = [1,2,3,4,5,6,7,8,9,10], website = [&quot;home&quot;,&quot;about&quot;,&quot;career&quot;,&quot;home&quot;,&quot;cart&quot;,&quot;maps&quot;,&quot;home&quot;,&quot;home&quot;,&quot;about&quot;,&quot;career&quot;]
Output: [&quot;home&quot;,&quot;about&quot;,&quot;career&quot;]
Explanation: The tuples in this example are:
[&quot;joe&quot;,&quot;home&quot;,1],[&quot;joe&quot;,&quot;about&quot;,2],[&quot;joe&quot;,&quot;career&quot;,3],[&quot;james&quot;,&quot;home&quot;,4],[&quot;james&quot;,&quot;cart&quot;,5],[&quot;james&quot;,&quot;maps&quot;,6],[&quot;james&quot;,&quot;home&quot;,7],[&quot;mary&quot;,&quot;home&quot;,8],[&quot;mary&quot;,&quot;about&quot;,9], and [&quot;mary&quot;,&quot;career&quot;,10].
The pattern (&quot;home&quot;, &quot;about&quot;, &quot;career&quot;) has score 2 (joe and mary).
The pattern (&quot;home&quot;, &quot;cart&quot;, &quot;maps&quot;) has score 1 (james).
The pattern (&quot;home&quot;, &quot;cart&quot;, &quot;home&quot;) has score 1 (james).
The pattern (&quot;home&quot;, &quot;maps&quot;, &quot;home&quot;) has score 1 (james).
The pattern (&quot;cart&quot;, &quot;maps&quot;, &quot;home&quot;) has score 1 (james).
The pattern (&quot;home&quot;, &quot;home&quot;, &quot;home&quot;) has score 0 (no user visited home 3 times).

Example 2:

Input: username = [&quot;ua&quot;,&quot;ua&quot;,&quot;ua&quot;,&quot;ub&quot;,&quot;ub&quot;,&quot;ub&quot;], timestamp = [1,2,3,4,5,6], website = [&quot;a&quot;,&quot;b&quot;,&quot;a&quot;,&quot;a&quot;,&quot;b&quot;,&quot;c&quot;]
Output: [&quot;a&quot;,&quot;b&quot;,&quot;a&quot;]

 

Constraints:

    3 &lt;= username.length &lt;= 50
    1 &lt;= username[i].length &lt;= 10
    timestamp.length == username.length
    1 &lt;= timestamp[i] &lt;= 109
    website.length == username.length
    1 &lt;= website[i].length &lt;= 10
    username[i] and website[i] consist of lowercase English letters.
    It is guaranteed that there is at least one user who visited at least three websites.
    All the tuples [username[i], timestamp[i], website[i]] are unique.
</code></pre>
<p>Java实现题，没什么高深莫测的算法。</p>
<h1 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h1><p>以下代码来自于<a target="_blank" rel="noopener" href="https://leetcode.cn/problems/analyze-user-website-visit-pattern/solution/cpython3java-1pai-xu-tong-ji-bao-li-zu-h-4q7j/">leetcode上面的网友Hanxin</a></p>
<ol>
<li>把 input 装入 一个struct，然后根据时间排序。</li>
<li>统计每个用户，访问过的所有网站 eg. Joe -&gt; {“baidu”, “google”, “gmail”, “p站”}</li>
<li>暴力方式，构建 3个word的pattern。</li>
<li>注意：如果一个用户常访问同一个pattern，只算一次。（所以给每个用户一个新的 hashset）</li>
<li>最终所有的pattern汇总到一个hashmap中，数一下max。</li>
</ol>
<p>就没必要自己写代码了，以下是网友的代码。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line">class Node</span><br><span class="line">&#123;</span><br><span class="line">    public String user;</span><br><span class="line">    public int time;</span><br><span class="line">    public String web;</span><br><span class="line"></span><br><span class="line">    Node(String user_, int time_, String web_)</span><br><span class="line">    &#123;</span><br><span class="line">        user = user_;</span><br><span class="line">        time = time_;</span><br><span class="line">        web = web_;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Solution </span><br><span class="line">&#123;</span><br><span class="line">    public List&lt;String&gt; mostVisitedPattern(String[] username, int[] timestamp, String[] website) </span><br><span class="line">    &#123;</span><br><span class="line">        int n = username.length;</span><br><span class="line"></span><br><span class="line">        //----统计所有结点，按时间升序排序</span><br><span class="line">        Node [] nodes = new Node [n];</span><br><span class="line">        for (int i = 0; i &lt; n; i ++)</span><br><span class="line">        &#123;</span><br><span class="line">            nodes[i] = new Node(username[i], timestamp[i], website[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        Arrays.sort(nodes, new Comparator&lt;&gt;()&#123;</span><br><span class="line">            public int compare(Node a, Node b)</span><br><span class="line">            &#123;</span><br><span class="line">                return a.time - b.time;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        //----统计每个用户，访问过的结点（已经是按时间升序）</span><br><span class="line">        Map&lt;String, List&lt;Node&gt;&gt; user_visit = new HashMap&lt;&gt;();</span><br><span class="line">        for (int i = 0; i &lt; n; i ++)</span><br><span class="line">        &#123;</span><br><span class="line">            Node x = nodes[i];</span><br><span class="line">            user_visit.putIfAbsent(x.user, new ArrayList&lt;&gt;());</span><br><span class="line">            user_visit.get(x.user).add(x);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //----每个用户，自己访问过的web，暴力构造长度为3的”路径“</span><br><span class="line">        Map&lt;String, Integer&gt; path_freq = new HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        for (Map.Entry&lt;String, List&lt;Node&gt;&gt; entry : user_visit.entrySet())</span><br><span class="line">        &#123;</span><br><span class="line">            String user = entry.getKey();</span><br><span class="line">            List&lt;Node&gt; visit = entry.getValue();</span><br><span class="line">            </span><br><span class="line">            Set&lt;String&gt; tmp_path_uset = new HashSet&lt;&gt;();    //----防止一个路径重复访问（很容易WA）</span><br><span class="line">            </span><br><span class="line">            int nn = visit.size();</span><br><span class="line">            for (int i = 0; i &lt; nn; i ++)</span><br><span class="line">            &#123;</span><br><span class="line">                for (int j = i + 1; j &lt; nn; j ++)</span><br><span class="line">                &#123;</span><br><span class="line">                    for (int k = j + 1; k &lt; nn; k ++)</span><br><span class="line">                    &#123;</span><br><span class="line">                        String cur_path = visit.get(i).web + &quot;#&quot; + visit.get(j).web + &quot;#&quot; + visit.get(k).web;</span><br><span class="line">                        tmp_path_uset.add(cur_path);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            for (String path : tmp_path_uset)</span><br><span class="line">                path_freq.put(path, path_freq.getOrDefault(path, 0) + 1);</span><br><span class="line">                </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        int max_freq = 0;</span><br><span class="line">        String res = &quot;&quot;;</span><br><span class="line">        for (Map.Entry&lt;String, Integer&gt; entry : path_freq.entrySet())</span><br><span class="line">        &#123;</span><br><span class="line">            String path = entry.getKey();</span><br><span class="line">            int f = entry.getValue();</span><br><span class="line">            if (f &gt; max_freq)</span><br><span class="line">            &#123;</span><br><span class="line">                max_freq = f;</span><br><span class="line">                res = path;</span><br><span class="line">            &#125;</span><br><span class="line">            else if (f == max_freq)</span><br><span class="line">            &#123;</span><br><span class="line">                String [] rr = res.split(&quot;#&quot;);</span><br><span class="line">                String [] pp = path.split(&quot;#&quot;);</span><br><span class="line">                if (pp[0].compareTo(rr[0]) &lt; 0 || (pp[0].equals(rr[0])==true &amp;&amp; pp[1].compareTo(rr[1]) &lt; 0) || (pp[0].equals(rr[0])==true &amp;&amp; pp[1].equals(rr[1])==true &amp;&amp; pp[2].compareTo(rr[2]) &lt; 0) )</span><br><span class="line">                &#123;</span><br><span class="line">                    res = path;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; </span><br><span class="line"></span><br><span class="line">        String [] tmp = res.split(&quot;#&quot;);</span><br><span class="line">        List&lt;String&gt; ans = new ArrayList&lt;&gt;();</span><br><span class="line">        for (String tm : tmp)</span><br><span class="line">            ans.add(tm);</span><br><span class="line">        return ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>Permalink:</span>
                        <span><a href="https://mar2ndx.github.io/2022/11/20/algo-2022-1152-Analyze-User-Website-Visit-Pattern/">https://mar2ndx.github.io/2022/11/20/algo-2022-1152-Analyze-User-Website-Visit-Pattern/</a></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>License:</span>
                        <span>Copyright (c) 2019 <a target="_blank" rel="noopener" href="http://creativecommons.org/licenses/by-nc/4.0/">CC-BY-NC-4.0</a> LICENSE</span>
                    </p>
                
                
                     <p class="copyright-item">
                         <span>Slogan:</span>
                         <span>Do you believe in <strong>DESTINY</strong>?</span>
                     </p>
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2022/11/20/algo-2022-0-Java-basics-Comparator-MapEntry/">Java一些基础语法：Comparator, MapEntry, Iterator</a>
            
            
            <a class="next" rel="next" href="/2022/11/18/algo-2022-277-Find-the-Celebrity/">277. Find the Celebrity</a>
            
        </section>


    </article>
</div>

            </div>
            <footer id="footer" class="footer">
    <div class="copyright">
        <span>©  | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
</body>

</html>