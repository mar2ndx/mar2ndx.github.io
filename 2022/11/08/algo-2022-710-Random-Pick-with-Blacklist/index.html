<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
  <title>
    
    710. Random Pick with Blacklist 丨
    

    typo
  </title>

  
  <link rel="shortcut icon" href="/icon.svg">
  

  <link rel="preconnect" href="https://cdnjs.cloudflare.com">
  
  <link id="theme" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-light.css">
  <script src="https://unpkg.com/@highlightjs/cdn-assets@11.9.0/highlight.min.js"></script>
  

  <!-- 字体 -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap" rel="stylesheet">

  
<link rel="stylesheet" href="/css/root.css">

  
<link rel="stylesheet" href="/css/style.css">

  
<link rel="stylesheet" href="/css/post.css">

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <header class="header">
  <section class="header-container">
    <a class="logo" href="/">Tech blog</a>
    <ul class="nav">
      
      <li><a href="/archives">archives</a></li>
      
      <li><a href="/about">about</a></li>
      
    </ul>
  </section>
</header>
  <main class="main">
    <article class="post">
  
  <div class="post-title">710. Random Pick with Blacklist</div>
  <div class="post-meta">
    <div class="date">2022 November 8th</div>
    <div class="tags">
      
    </div>
  </div>
  

  <main class="post-content"><p>Link: <a target="_blank" rel="noopener" href="https://leetcode.cn/problems/random-pick-with-blacklist/">https://leetcode.cn/problems/random-pick-with-blacklist/</a></p>
<h1 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h1><pre><code>difficulty: hard
adj diff: 5

You are given an integer n and an array of unique integers blacklist. Design an algorithm to pick a random integer in the range [0, n - 1] that is not in blacklist. Any integer that is in the mentioned range and not in blacklist should be equally likely to be returned.

Optimize your algorithm such that it minimizes the number of calls to the built-in random function of your language.

Implement the Solution class:

	Solution(int n, int[] blacklist) Initializes the object with the integer n and the blacklisted integers blacklist.
	int pick() Returns a random integer in the range [0, n - 1] and not in blacklist.

Example 1:

Input
[&quot;Solution&quot;, &quot;pick&quot;, &quot;pick&quot;, &quot;pick&quot;, &quot;pick&quot;, &quot;pick&quot;, &quot;pick&quot;, &quot;pick&quot;]
[[7, [2, 3, 5]], [], [], [], [], [], [], []]
Output
[null, 0, 4, 1, 6, 1, 0, 4]

Explanation
Solution solution = new Solution(7, [2, 3, 5]);
solution.pick(); // return 0, any integer from [0,1,4,6] should be ok. Note that for every call of pick,
				 // 0, 1, 4, and 6 must be equally likely to be returned (i.e., with probability 1/4).
solution.pick(); // return 4
solution.pick(); // return 1
solution.pick(); // return 6
solution.pick(); // return 1
solution.pick(); // return 0
solution.pick(); // return 4
Constraints:

	1 &lt;= n &lt;= 109
	0 &lt;= blacklist.length &lt;= min(105, n - 1)
	0 &lt;= blacklist[i] &lt; n
	All the values of blacklist are unique.
	At most 2 * 104 calls will be made to pick.
</code></pre>
<p>这道题，代码比较难写。</p>
<p>思路如下：</p>
<pre><code>// n = 11 &amp; blacklist = &#123;7, 9&#125;
// 0 1 2 3 4 5 6 (7) 8 (9) 10
</code></pre>
<p>在 11 - 2 &#x3D; 9 的位置，做一下切割：</p>
<pre><code>// 0 1 2 3 4 5 6 (7) 8 ||| (9) 10
</code></pre>
<p>然后，在 map 种，放入整个 k-v：</p>
<pre><code>// map = &#123; 7 =&gt; 10&#125;
</code></pre>
<p>这样，我 generate 一个[0, 9) 范围内的 int rand &#x3D; generateRandom()。如果 rand &#x3D;&#x3D; 7，则返回 10；否则直接返回 rand。</p>
<h1 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line"></span><br><span class="line">    Random random = new Random();</span><br><span class="line">    Map&lt;Integer, Integer&gt; map = new HashMap&lt;Integer, Integer&gt;();</span><br><span class="line">    int range;</span><br><span class="line"></span><br><span class="line">    public Solution(int n, int[] blacklist) &#123;</span><br><span class="line">        // eg. 0 1 2 3 4 5 6 (7) 8 (9) 10 (n = 11 &amp; blacklist = &#123;7, 9&#125;)</span><br><span class="line">        // generate random number in the range of [0, 8]</span><br><span class="line">        // if got 8, return 8; if got 7, return 10;</span><br><span class="line">        Arrays.sort(blacklist);</span><br><span class="line">        range = n - blacklist.length;</span><br><span class="line"></span><br><span class="line">        if (blacklist.length == 0) return;</span><br><span class="line"></span><br><span class="line">        // eg. 0 1 2 3 4 5 6 (7) 8 || (9) 10 (range = 9)</span><br><span class="line">        // need to put into the map [7 -&gt; 10]</span><br><span class="line">        int left = 0, right = blacklist.length - 1;</span><br><span class="line">        int validNum = n - 1;</span><br><span class="line"></span><br><span class="line">        while (left &lt;= right &amp;&amp; blacklist[left] &lt; range) &#123;</span><br><span class="line">            while (blacklist[right] == validNum) &#123;</span><br><span class="line">                right--;</span><br><span class="line">                validNum--;</span><br><span class="line">            &#125;</span><br><span class="line">            map.put(blacklist[left], validNum);</span><br><span class="line">            left++;</span><br><span class="line">            validNum--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int pick() &#123;</span><br><span class="line">        int genRand = random.nextInt(range);</span><br><span class="line">        if (map.containsKey(genRand)) &#123;</span><br><span class="line">            return map.get(genRand);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            return genRand;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</main>

</article>


<script src="/js/highlight.js"></script>

  </main>
  <footer class="footer">
  
  <span>Copyright © 2024 typo</span>
  
</footer>
  
<script src="/js/theme.js"></script>

</body>

</html>