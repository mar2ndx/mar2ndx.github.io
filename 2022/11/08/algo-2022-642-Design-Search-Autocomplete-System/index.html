<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
  <title>
    
    642. Design Search Autocomplete System 丨
    

    typo
  </title>

  
  <link rel="shortcut icon" href="/icon.svg">
  

  <link rel="preconnect" href="https://cdnjs.cloudflare.com">
  
  <link id="theme" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-light.css">
  <script src="https://unpkg.com/@highlightjs/cdn-assets@11.9.0/highlight.min.js"></script>
  

  <!-- 字体 -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap" rel="stylesheet">

  
<link rel="stylesheet" href="/css/root.css">

  
<link rel="stylesheet" href="/css/style.css">

  
<link rel="stylesheet" href="/css/post.css">

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <header class="header">
  <section class="header-container">
    <a class="logo" href="/">Tech blog</a>
    <ul class="nav">
      
      <li><a href="/archives">archives</a></li>
      
      <li><a href="/about">about</a></li>
      
    </ul>
  </section>
</header>
  <main class="main">
    <article class="post">
  
  <div class="post-title">642. Design Search Autocomplete System</div>
  <div class="post-meta">
    <div class="date">2022 November 8th</div>
    <div class="tags">
      
    </div>
  </div>
  

  <main class="post-content"><p>Link: <a target="_blank" rel="noopener" href="https://leetcode.cn/problems/design-search-autocomplete-system/">https://leetcode.cn/problems/design-search-autocomplete-system/</a></p>
<h1 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h1><p>difficulty: high<br>adj diff: 5</p>
<pre><code>Design a search autocomplete system for a search engine. Users may input a sentence (at least one word and end with a special character &#39;#&#39;).

You are given a string array sentences and an integer array times both of length n where sentences[i] is a previously typed sentence and times[i] is the corresponding number of times the sentence was typed. For each input character except &#39;#&#39;, return the top 3 historical hot sentences that have the same prefix as the part of the sentence already typed.

Here are the specific rules:

The hot degree for a sentence is defined as the number of times a user typed the exactly same sentence before.
The returned top 3 hot sentences should be sorted by hot degree (The first is the hottest one). If several sentences have the same hot degree, use ASCII-code order (smaller one appears first).
If less than 3 hot sentences exist, return as many as you can.
When the input is a special character, it means the sentence ends, and in this case, you need to return an empty list.
Implement the AutocompleteSystem class:

AutocompleteSystem(String[] sentences, int[] times) Initializes the object with the sentences and times arrays.
List&lt;String&gt; input(char c) This indicates that the user typed the character c.
Returns an empty array [] if c == &#39;#&#39; and stores the inputted sentence in the system.
Returns the top 3 historical hot sentences that have the same prefix as the part of the sentence already typed. If there are fewer than 3 matches, return them all.

Example 1:

Input
[&quot;AutocompleteSystem&quot;, &quot;input&quot;, &quot;input&quot;, &quot;input&quot;, &quot;input&quot;]
[[[&quot;i love you&quot;, &quot;island&quot;, &quot;iroman&quot;, &quot;i love leetcode&quot;], [5, 3, 2, 2]], [&quot;i&quot;], [&quot; &quot;], [&quot;a&quot;], [&quot;#&quot;]]
Output
[null, [&quot;i love you&quot;, &quot;island&quot;, &quot;i love leetcode&quot;], [&quot;i love you&quot;, &quot;i love leetcode&quot;], [], []]

Explanation
AutocompleteSystem obj = new AutocompleteSystem([&quot;i love you&quot;, &quot;island&quot;, &quot;iroman&quot;, &quot;i love leetcode&quot;], [5, 3, 2, 2]);
obj.input(&quot;i&quot;); // return [&quot;i love you&quot;, &quot;island&quot;, &quot;i love leetcode&quot;]. There are four sentences that have prefix &quot;i&quot;. Among them, &quot;ironman&quot; and &quot;i love leetcode&quot; have same hot degree. Since &#39; &#39; has ASCII code 32 and &#39;r&#39; has ASCII code 114, &quot;i love leetcode&quot; should be in front of &quot;ironman&quot;. Also we only need to output top 3 hot sentences, so &quot;ironman&quot; will be ignored.
obj.input(&quot; &quot;); // return [&quot;i love you&quot;, &quot;i love leetcode&quot;]. There are only two sentences that have prefix &quot;i &quot;.
obj.input(&quot;a&quot;); // return []. There are no sentences that have prefix &quot;i a&quot;.
obj.input(&quot;#&quot;); // return []. The user finished the input, the sentence &quot;i a&quot; should be saved as a historical sentence in system. And the following input will be counted as a new search.

Constraints:

n == sentences.length
n == times.length
1 &lt;= n &lt;= 100
1 &lt;= sentences[i].length &lt;= 100
1 &lt;= times[i] &lt;= 50
c is a lowercase English letter, a hash &#39;#&#39;, or space &#39; &#39;.
Each tested sentence will be a sequence of characters c that end with the character &#39;#&#39;.
Each tested sentence will have a length in the range [1, 200].
The words in each input sentence are separated by single spaces.
At most 5000 calls will be made to input.
</code></pre>
<h1 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h1><p>用 Trie 结构。如下。</p>
<p>Someone else code：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">public class AutocompleteSystem &#123;</span><br><span class="line">	class Node &#123;</span><br><span class="line">		Node(String st, int t) &#123;</span><br><span class="line">			sentence = st;</span><br><span class="line">			times = t;</span><br><span class="line">		&#125;</span><br><span class="line">		String sentence;</span><br><span class="line">		int times;</span><br><span class="line">	&#125;</span><br><span class="line">	class Trie &#123;</span><br><span class="line">		int times;</span><br><span class="line">		Trie[] branches = new Trie[27];</span><br><span class="line">	&#125;</span><br><span class="line">	public int int_(char c) &#123;</span><br><span class="line">		return c == &#x27; &#x27; ? 26 : c - &#x27;a&#x27;;</span><br><span class="line">	&#125;</span><br><span class="line">	public void insert(Trie t, String s, int times) &#123;</span><br><span class="line">		for (int i = 0; i &lt; s.length(); i++) &#123;</span><br><span class="line">			if (t.branches[int_(s.charAt(i))] == null)</span><br><span class="line">				t.branches[int_(s.charAt(i))] = new Trie();</span><br><span class="line">			t = t.branches[int_(s.charAt(i))];</span><br><span class="line">		&#125;</span><br><span class="line">		t.times += times;</span><br><span class="line">	&#125;</span><br><span class="line">	public List &lt; Node &gt; lookup(Trie t, String s) &#123;</span><br><span class="line">		List &lt; Node &gt; list = new ArrayList &lt; &gt; ();</span><br><span class="line">		for (int i = 0; i &lt; s.length(); i++) &#123;</span><br><span class="line">			if (t.branches[int_(s.charAt(i))] == null)</span><br><span class="line">				return new ArrayList &lt; Node &gt; ();</span><br><span class="line">			t = t.branches[int_(s.charAt(i))];</span><br><span class="line">		&#125;</span><br><span class="line">		traverse(s, t, list);</span><br><span class="line">		return list;</span><br><span class="line">	&#125;</span><br><span class="line">	public void traverse(String s, Trie t, List &lt; Node &gt; list) &#123;</span><br><span class="line">		if (t.times &gt; 0)</span><br><span class="line">			list.add(new Node(s, t.times));</span><br><span class="line">		for (char i = &#x27;a&#x27;; i &lt;= &#x27;z&#x27;; i++) &#123;</span><br><span class="line">			if (t.branches[i - &#x27;a&#x27;] != null)</span><br><span class="line">				traverse(s + i, t.branches[i - &#x27;a&#x27;], list);</span><br><span class="line">		&#125;</span><br><span class="line">		if (t.branches[26] != null)</span><br><span class="line">			traverse(s + &#x27; &#x27;, t.branches[26], list);</span><br><span class="line">	&#125;</span><br><span class="line">	Trie root;</span><br><span class="line">	public AutocompleteSystem(String[] sentences, int[] times) &#123;</span><br><span class="line">		root = new Trie();</span><br><span class="line">		for (int i = 0; i &lt; sentences.length; i++) &#123;</span><br><span class="line">			insert(root, sentences[i], times[i]);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	String cur_sent = &quot;&quot;;</span><br><span class="line">	public List &lt; String &gt; input(char c) &#123;</span><br><span class="line">		List &lt; String &gt; res = new ArrayList &lt; &gt; ();</span><br><span class="line">		if (c == &#x27;#&#x27;) &#123;</span><br><span class="line">			insert(root, cur_sent, 1);</span><br><span class="line">			cur_sent = &quot;&quot;;</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			cur_sent += c;</span><br><span class="line">			List &lt; Node &gt; list = lookup(root, cur_sent);</span><br><span class="line">			Collections.sort(list, (a, b) -&gt; a.times == b.times ? a.sentence.compareTo(b.sentence) : b.times - a.times);</span><br><span class="line">			for (int i = 0; i &lt; Math.min(3, list.size()); i++)</span><br><span class="line">				res.add(list.get(i).sentence);</span><br><span class="line">		&#125;</span><br><span class="line">		return res;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Your AutocompleteSystem object will be instantiated and called as such:</span><br><span class="line"> * AutocompleteSystem obj = new AutocompleteSystem(sentences, times);</span><br><span class="line"> * List&lt;String&gt; param_1 = obj.input(c);</span><br><span class="line"> */</span><br></pre></td></tr></table></figure>
</main>

</article>


<script src="/js/highlight.js"></script>

  </main>
  <footer class="footer">
  
  <span>Copyright © 2024 typo</span>
  
</footer>
  
<script src="/js/theme.js"></script>

</body>

</html>