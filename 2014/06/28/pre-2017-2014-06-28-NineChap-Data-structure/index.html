<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">





<title>[NineChap 7] Data Structure | Tech blog</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


<meta name="generator" content="Hexo 7.3.0"></head>

<body>
    <script>
        // this function is used to check current theme before page loaded.
        (() => {
            const pagebody = document.getElementsByTagName('body')[0]

            function setTheme(status) {

                if (status === 'dark') {
                    window.sessionStorage.theme = 'dark'
                    pagebody.classList.add('dark-theme');

                } else if (status === 'light') {
                    window.sessionStorage.theme = 'light'
                    pagebody.classList.remove('dark-theme');
                }
            };

            setTheme(window.sessionStorage.theme)
        })();
    </script>

    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Tech Blog</a></div>
            <div class="menu navbar-right">
                
                <a class="menu-item" href="/archives">Posts</a>
                
                <a class="menu-item" href="/category">Categories</a>
                
                <a class="menu-item" href="/tag">Tags</a>
                
                <a class="menu-item" href="/about">About</a>
                
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">Tech Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">
                    <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M4.5 17.27q-.213 0-.356-.145T4 16.768t.144-.356t.356-.143h15q.213 0 .356.144q.144.144.144.357t-.144.356t-.356.143zm0-4.77q-.213 0-.356-.144T4 11.999t.144-.356t.356-.143h15q.213 0 .356.144t.144.357t-.144.356t-.356.143zm0-4.77q-.213 0-.356-.143Q4 7.443 4 7.23t.144-.356t.356-.143h15q.213 0 .356.144T20 7.23t-.144.356t-.356.144z"/></svg>
                    <svg class="close-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><!-- Icon from Material Symbols Light by Google - https://github.com/google/material-design-icons/blob/master/LICENSE --><path fill="currentColor" d="m12 12.708l-5.246 5.246q-.14.14-.344.15t-.364-.15t-.16-.354t.16-.354L11.292 12L6.046 6.754q-.14-.14-.15-.344t.15-.364t.354-.16t.354.16L12 11.292l5.246-5.246q.14-.14.345-.15q.203-.01.363.15t.16.354t-.16.354L12.708 12l5.246 5.246q.14.14.15.345q.01.203-.15.363t-.354.16t-.354-.16z"/></svg>
                </div>
            </div>
            <div class="menu" id="mobile-menu">
                
                <a class="menu-item" href="/archives">Posts</a>
                
                <a class="menu-item" href="/category">Categories</a>
                
                <a class="menu-item" href="/tag">Tags</a>
                
                <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if (toggleMenu.classList.contains("active")) {
            toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        } else {
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
            <div class="main">
                <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    var tocbot_timer;
    var DEPTH_MAX = 6; // 为 6 时展开所有
    var tocbot_default_config = {
        tocSelector: '.tocbot-list',
        contentSelector: '.post-content',
        headingSelector: 'h1, h2, h3, h4, h5',
        orderedList: false,
        scrollSmooth: true,
        onClick: extend_click,
    };

    function extend_click() {
        clearTimeout(tocbot_timer);
        tocbot_timer = setTimeout(function() {
            tocbot.refresh(obj_merge(tocbot_default_config, {
                hasInnerContainers: true
            }));
        }, 420); // 这个值是由 tocbot 源码里定义的 scrollSmoothDuration 得来的
    }

    document.ready(function() {
        tocbot.init(obj_merge(tocbot_default_config, {
            collapseDepth: 1
        }));
    });

    function expand_toc() {
        var b = document.querySelector('.tocbot-toc-expand');
        var expanded = b.getAttribute('data-expanded');
        expanded ? b.removeAttribute('data-expanded') : b.setAttribute('data-expanded', true);
        tocbot.refresh(obj_merge(tocbot_default_config, {
            collapseDepth: expanded ? 1 : DEPTH_MAX
        }));
        b.innerText = expanded ? 'Expand all' : 'Collapse all';
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

    function obj_merge(target, source) {
        for (var item in source) {
            if (source.hasOwnProperty(item)) {
                target[item] = source[item];
            }
        }
        return target;
    }
</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">[NineChap 7] Data Structure</h1>
            
                <div class="post-meta">
                    

                    
                        <span class="post-time">
                        Date: <a href="#">June 28, 2014&nbsp;&nbsp;0:00:00</a>
                        </span>
                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/categories/NineChap/">NineChap</a>
                            
                        </span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <h2 id="Data-Structure"><a href="#Data-Structure" class="headerlink" title="Data Structure"></a>Data Structure</h2><p>Data structure is a way to manage data. It provides some methods to handle data stream. For example, DB is a DS.</p>
<h3 id="Stack-and-Queue"><a href="#Stack-and-Queue" class="headerlink" title="Stack and Queue"></a>Stack and Queue</h3><ol>
<li><p><strong><a href="/question/2014-07-01-Min-Stack">Min-stack</a></strong></p>
</li>
<li><p><strong><a href="/question/2014-07-01-Implement-queue-with-stack">Implement a queue by two stacks</a></strong></p>
</li>
<li><p><strong><a href="/leetcode/2014-05-23-Largest-Rectangle-in-Histogram">Largest Rectangle in histogram</a></strong></p>
</li>
</ol>
<h3 id="Hash"><a href="#Hash" class="headerlink" title="Hash"></a>Hash</h3><h4 id="Hash-function"><a href="#Hash-function" class="headerlink" title="Hash function"></a>Hash function</h4><ol>
<li>MD5</li>
<li>Magic number 33 (<strong>PHP hash function <a target="_blank" rel="noopener" href="http://events.ccc.de/congress/2011/Fahrplan/attachments/2007_28C3_Effective_DoS_on_web_application_platforms.pdf">DJBX33A</a></strong>)</li>
</ol>
<p>Magic Number:</p>
<pre><code>int hashfunc(String key) &#123;
    int sum = 0;
    for (int i = 0; i &lt; key.length(); i++) &#123;
        sum = sum * 33 + (int)(key.charAt(i));
        sum = sum % HASH_TABLE_SIZE;
    &#125;
    return sum
&#125;
</code></pre>
<h4 id="Collision"><a href="#Collision" class="headerlink" title="Collision"></a>Collision</h4><ol>
<li><p><strong>Close hashing (also called Open addressing)</strong></p>
<p>Resolves conflict by probing, or searching through alternate locations in the array</p>
<p>Suck scheme may cause the lookup cost to skyrocket. Not good to use.</p>
</li>
<li><p><strong>Open hashing</strong></p>
<p>Keys stored in linked lists attached to cells of the hash table.</p>
<p>Practically, hash size set around 10 times the size of data</p>
<p>Used by Java and most other languages.</p>
</li>
</ol>
<h4 id="Rehashing"><a href="#Rehashing" class="headerlink" title="Rehashing"></a>Rehashing</h4><ol>
<li><p>Memcached is a general-purpose distributed memory caching system. One of its bottleneck is rehashing, which locks down the entire hash.</p>
</li>
<li><p>Dynamic resizing (normally size * 2) and copy all elements into the new hash.</p>
</li>
<li><p>Extremely slow process, we should try to avoid it by setting a large enough initial size.</p>
</li>
</ol>
<h4 id="Hash-questions"><a href="#Hash-questions" class="headerlink" title="Hash questions:"></a>Hash questions:</h4><ol>
<li><p><strong><a href="/question/2014-07-01-Implement-Hashmap">Implement a hashmap</a></strong></p>
</li>
<li><p><strong><a href="/design/2014-07-01-Hashmap-Hashtable-Hashset">HashMap vs Hashtable vs HashSet</a></strong></p>
</li>
<li><p><strong><a href="/leetcode/2014-06-03-LRU-Cache">LRU Cache</a></strong></p>
</li>
<li><p><strong><a href="/leetcode/2014-05-29-Longest-Consecutive-Sequence">Longest consecutive sequence</a></strong></p>
</li>
</ol>
<h3 id="Heap"><a href="#Heap" class="headerlink" title="Heap"></a>Heap</h3><ol>
<li>Child is always larger than parent</li>
<li>Heap is not a sorted structure, but it’s partially ordered</li>
<li>Heap is always balanced</li>
</ol>
<p>Heap is better than array because average of 3 operations is O(logn), but array is O(n).</p>
<blockquote>
<p>Add O(log N)</p>
<p>Remove O(log N)</p>
<p>Min&#x2F;Max O(1)</p>
</blockquote>
<h4 id="Heap-implementation"><a href="#Heap-implementation" class="headerlink" title="Heap implementation:"></a>Heap implementation:</h4><ol>
<li><p>Low Level: dynamic array, not list</p>
</li>
<li><p>Internal Method: Shiftup, Shiftdown operations</p>
</li>
<li><p>A heap is a complete binary tree (最优二叉树) <strong>represented by an array</strong></p>
</li>
<li><p>When removing element from heap, we actually uses HashMap to find that element.</p>
</li>
</ol>
<blockquote>
<p>Heaps are usually implemented in an array, and do not require pointers between elements.</p>
<p>Full and almost full binary heaps may be represented in a very space-efficient way using an array alone. The first element will contain the root. The next two elements of the array contain its children. The next four contain the four children of the two child nodes, etc.</p>
<p>Thus the children of the node at position n would be at positions 2n+1 and 2n+2.</p>
</blockquote>
<p>So to summarize:</p>
<ol>
<li>elems[1] - root, also the minimum elem in elems.</li>
<li>elems[i]: left child is elems[i<em>2], right child is elems[i</em>2+1]</li>
</ol>
<p>Implementation code:</p>
<pre><code>Add:
    Push back to elems; size ++; Siftup;
Remove:
    Replace the elem to be removed with the last elem;
    size --;
    Siftup and Siftdown.
</code></pre>
<h4 id="Heap-questions"><a href="#Heap-questions" class="headerlink" title="Heap questions:"></a>Heap questions:</h4><ol>
<li><p><strong><a href="/question/2014-07-01-Median-in-stream-of-integers">Median in a stream of integers</a></strong></p>
</li>
<li><p><strong><a href="/question/2014-07-01-The-Skyline-Problem">The Skyline Problem</a></strong></p>
</li>
</ol>
<h3 id="Interval-Tree"><a href="#Interval-Tree" class="headerlink" title="Interval Tree"></a>Interval Tree</h3><p>Easily find the max&#x2F;min value in an interval. 2 example questions are:</p>
<ol>
<li>Find min&#x2F;max&#x2F;sum in an interval</li>
<li>最长的连续 1</li>
</ol>
<h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><p><strong>Largest Rectangle in histogram</strong></p>
<pre><code>public int largestRectangleArea(int[] height) &#123;
    if (height == null || height.length == 0) &#123;
        return 0;
    &#125;
    Stack&lt;Integer&gt; stack = new Stack&lt;Integer&gt;();
    stack.add(0);
    int len = height.length;
    int area = 0;
    for (int i = 1; i &lt;= len; i++) &#123;
        int h = i == len ? 0 : height[i];
        // pop a element and calculate its max area
        // pop until the top element is smaller than h, then push h
        while (!stack.isEmpty() &amp;&amp; h &lt; height[stack.peek()]) &#123;
            int pos = stack.pop();
            int width = stack.isEmpty() ? i : i - stack.peek() - 1;
            area = Math.max(area, height[pos] * width);
        &#125;
        stack.push(i);
    &#125;
    return area;
&#125;
</code></pre>
<p><strong>LRU Cache</strong></p>
<p>I posted code in the new post.</p>
<p><strong>Longest consecutive sequence</strong></p>
<pre><code>public int longestConsecutive(int[] num) &#123;
    if (num == null || num.length == 0) &#123;
        return 0;
    &#125;
    HashSet&lt;Integer&gt; set = new HashSet&lt;Integer&gt;();
    for (Integer i: num) &#123;
        set.add(i);
    &#125;
    int longest = 0;
    for (Integer i: num) &#123;
        if (!set.contains(i)) &#123;
            continue;
        &#125;
        int left = i - 1;
        while (set.contains(left)) &#123;
            set.remove(left--);
        &#125;
        int right = i + 1;
        while (set.contains(right)) &#123;
            set.remove(right++);
        &#125;
        longest = Math.max(longest, right - left - 1);
        set.remove(i);
    &#125;
    return longest;
&#125;
</code></pre>

        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>Permalink:</span>
                        <span><a href="https://mar2ndx.github.io/2014/06/28/pre-2017-2014-06-28-NineChap-Data-structure/">https://mar2ndx.github.io/2014/06/28/pre-2017-2014-06-28-NineChap-Data-structure/</a></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>License:</span>
                        <span>Copyright (c) 2019 <a target="_blank" rel="noopener" href="http://creativecommons.org/licenses/by-nc/4.0/">CC-BY-NC-4.0</a> LICENSE</span>
                    </p>
                
                
                     <p class="copyright-item">
                         <span>Slogan:</span>
                         <span>Do you believe in <strong>DESTINY</strong>?</span>
                     </p>
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2014/06/28/pre-2017-2014-06-28-Minimum-subarray/">[LintCode] Minimum Subarray</a>
            
            
            <a class="next" rel="next" href="/2014/06/28/pre-2017-2014-06-28-NineChap-High-frequency/">[NineChap 8] High Frequency Questions</a>
            
        </section>


    </article>
</div>

            </div>
            <footer id="footer" class="footer">
    <div class="copyright">
        <span>©  | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
</body>

</html>