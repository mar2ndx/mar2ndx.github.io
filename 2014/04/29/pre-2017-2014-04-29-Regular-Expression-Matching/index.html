<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">





<title>[LeetCode 10] Regular Expression Matching  | Tech blog</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


<meta name="generator" content="Hexo 7.3.0"></head>

<body>
    <script>
        // this function is used to check current theme before page loaded.
        (() => {
            const pagebody = document.getElementsByTagName('body')[0]

            function setTheme(status) {

                if (status === 'dark') {
                    window.sessionStorage.theme = 'dark'
                    pagebody.classList.add('dark-theme');

                } else if (status === 'light') {
                    window.sessionStorage.theme = 'light'
                    pagebody.classList.remove('dark-theme');
                }
            };

            setTheme(window.sessionStorage.theme)
        })();
    </script>

    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Tech Blog</a></div>
            <div class="menu navbar-right">
                
                <a class="menu-item" href="/archives">Posts</a>
                
                <a class="menu-item" href="/category">Categories</a>
                
                <a class="menu-item" href="/tag">Tags</a>
                
                <a class="menu-item" href="/about">About</a>
                
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">Tech Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">
                    <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M4.5 17.27q-.213 0-.356-.145T4 16.768t.144-.356t.356-.143h15q.213 0 .356.144q.144.144.144.357t-.144.356t-.356.143zm0-4.77q-.213 0-.356-.144T4 11.999t.144-.356t.356-.143h15q.213 0 .356.144t.144.357t-.144.356t-.356.143zm0-4.77q-.213 0-.356-.143Q4 7.443 4 7.23t.144-.356t.356-.143h15q.213 0 .356.144T20 7.23t-.144.356t-.356.144z"/></svg>
                    <svg class="close-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><!-- Icon from Material Symbols Light by Google - https://github.com/google/material-design-icons/blob/master/LICENSE --><path fill="currentColor" d="m12 12.708l-5.246 5.246q-.14.14-.344.15t-.364-.15t-.16-.354t.16-.354L11.292 12L6.046 6.754q-.14-.14-.15-.344t.15-.364t.354-.16t.354.16L12 11.292l5.246-5.246q.14-.14.345-.15q.203-.01.363.15t.16.354t-.16.354L12.708 12l5.246 5.246q.14.14.15.345q.01.203-.15.363t-.354.16t-.354-.16z"/></svg>
                </div>
            </div>
            <div class="menu" id="mobile-menu">
                
                <a class="menu-item" href="/archives">Posts</a>
                
                <a class="menu-item" href="/category">Categories</a>
                
                <a class="menu-item" href="/tag">Tags</a>
                
                <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if (toggleMenu.classList.contains("active")) {
            toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        } else {
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
            <div class="main">
                <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    var tocbot_timer;
    var DEPTH_MAX = 6; // 为 6 时展开所有
    var tocbot_default_config = {
        tocSelector: '.tocbot-list',
        contentSelector: '.post-content',
        headingSelector: 'h1, h2, h3, h4, h5',
        orderedList: false,
        scrollSmooth: true,
        onClick: extend_click,
    };

    function extend_click() {
        clearTimeout(tocbot_timer);
        tocbot_timer = setTimeout(function() {
            tocbot.refresh(obj_merge(tocbot_default_config, {
                hasInnerContainers: true
            }));
        }, 420); // 这个值是由 tocbot 源码里定义的 scrollSmoothDuration 得来的
    }

    document.ready(function() {
        tocbot.init(obj_merge(tocbot_default_config, {
            collapseDepth: 1
        }));
    });

    function expand_toc() {
        var b = document.querySelector('.tocbot-toc-expand');
        var expanded = b.getAttribute('data-expanded');
        expanded ? b.removeAttribute('data-expanded') : b.setAttribute('data-expanded', true);
        tocbot.refresh(obj_merge(tocbot_default_config, {
            collapseDepth: expanded ? 1 : DEPTH_MAX
        }));
        b.innerText = expanded ? 'Expand all' : 'Collapse all';
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

    function obj_merge(target, source) {
        for (var item in source) {
            if (source.hasOwnProperty(item)) {
                target[item] = source[item];
            }
        }
        return target;
    }
</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">[LeetCode 10] Regular Expression Matching </h1>
            
                <div class="post-meta">
                    

                    
                        <span class="post-time">
                        Date: <a href="#">April 29, 2014&nbsp;&nbsp;0:00:00</a>
                        </span>
                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/categories/Leetcode/">Leetcode</a>
                            
                        </span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <h3 id="Question"><a href="#Question" class="headerlink" title="Question"></a>Question</h3><p><a target="_blank" rel="noopener" href="http://oj.leetcode.com/problems/regular-expression-matching/">link</a></p>
<div class="question-content">
<p></p><p>Implement regular expression matching with support for <code>'.'</code> and <code>'*'</code>.</p>

<pre>'.' Matches any single character.
'*' Matches <b>zero or more of the preceding</b> element.

The matching should cover the <b>entire</b> input string (not partial).

The function prototype should be:
bool isMatch(const char *s, const char *p)

Some examples:
isMatch("aa","a") → false
isMatch("aa","aa") → true
isMatch("aaa","aa") → false
isMatch("aa", "a*") → true
isMatch("aa", ".*") → true
isMatch("ab", ".*") → true
isMatch("aab", "c*a*b") → true
</pre><p></p>
</div>

<h3 id="Stats"><a href="#Stats" class="headerlink" title="Stats"></a>Stats</h3><table border="2">
	<tr>
		<td>Frequency</td>
		<td bgcolor="yellow">3</td>
	</tr>
	<tr>
		<td>Diffficulty</td>
		<td bgcolor="red">5</td>
	</tr>
	<tr>
		<td>Adjusted Difficulty</td>
		<td bgcolor="red">4</td>
	</tr>
	<tr>
		<td>Time to use</td>
		<td bgcolor="red">----------</td>
	</tr>
</table>

<p>Ratings&#x2F;Color &#x3D; 1(white) 2(lime) 3(yellow) 4&#x2F;5(red)</p>
<h3 id="Analysis"><a href="#Analysis" class="headerlink" title="Analysis"></a>Analysis</h3><p><strong>Very important to note: Do not use DP</strong>. Why? Because eg. “a*b” will be considered as 2 parts: “a*“ part and “b” part. Because star is considered to be bundled with previous char, it gives us difficulty in determine the size of the DP array. Of course, we still can do it, but I see nobody have provided a nice DP solution online. Let’s just forget about it for now.</p>
<p>The solution I’m giving in this post, is to trim String and compare.</p>
<p><strong>We only need to consider 2 cases</strong>:</p>
<p>One, the next char is NOT a star sign. This requires simply char compare.</p>
<p>Two, the next char is a star sign, this will require some effort.</p>
<h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><p>In case of one letter bundled with a star sign, we iterate thru all possible number of repetition of current char (from 0 until large), and check validation one by one.</p>
<p>A final important note, <strong>this question very much looks like DP, but NOT DP</strong>.</p>
<h3 id="My-code"><a href="#My-code" class="headerlink" title="My code"></a>My code</h3><p>My code.</p>
<pre><code>public class Solution &#123;
    public boolean isMatch(String s, String p) &#123;
        // eg. s = &quot;aab&quot;  p = &quot;c*a*b&quot;
        return check(s, p, 0, 0);
    &#125;

    private boolean check(String s, String p, int start1, int start2) &#123;
        int len1 = s.length();
        int len2 = p.length();
        if (start1 == len1 &amp;&amp; start2 == len2) &#123;
            return true;
        &#125; else if (start2 == len2) &#123;
            // if p is used up, but still some letters left in s
            return false;
        &#125;
        // check if there is * after start2 in p
        if (start2 == len2 - 1 || p.charAt(start2 + 1) != &#39;*&#39;) &#123;
            // if there is no *
            // match only 1 char
            if (start1 == len1) &#123;
                // unable to match single char because s is fully used up
            &#125; else if (p.charAt(start2) != &#39;.&#39; &amp;&amp; s.charAt(start1) != p.charAt(start2)) &#123;
                // if single char could not be matched
                return false;
            &#125; else &#123;
                // if single letter matches
                return check(s, p, start1 + 1, start2 + 1);
            &#125;
        &#125; else &#123;
            // if there is a * following start2
            if (check(s, p, start1, start2 + 2)) &#123;
                // the letter in p represent 0 chars
                return true;
            &#125; else &#123;
                // the letter in p represent 1 or more chars
                // advance start1 until the end of s
                while (start1 &lt; len1) &#123;
                    // check if the char matches
                    if (p.charAt(start2) != &#39;.&#39; &amp;&amp; s.charAt(start1) != p.charAt(start2)) &#123;
                        break;
                    &#125;
                    if (check(s, p, start1 + 1, start2 + 2)) &#123;
                        return true;
                    &#125;
                    start1++;
                &#125;
            &#125;
        &#125;
        return false;
    &#125;
&#125;
</code></pre>
<p>A much shorter version from <a target="_blank" rel="noopener" href="http://www.programcreek.com/2012/12/leetcode-regular-expression-matching-in-java/">someone else</a> making use of <strong>String.substring()</strong>. I refactored a bit.</p>
<pre><code>public class Solution &#123;
    public boolean isMatch(String s, String p) &#123;
        // s is normal string, and p is regex string
        if (p.length() == 0) &#123;
            return s.length() == 0;
        &#125; else if (p.length() &lt; 2 || p.charAt(1) != &#39;*&#39;) &#123;
            // if 2nd char in p is not &#39;*&#39;, then match character
            if (s.length() == 0) &#123;
                return false;
            &#125; else if (p.charAt(0) != &#39;.&#39; &amp;&amp; s.charAt(0) != p.charAt(0)) &#123;
                return false;
            &#125; else &#123;
                return isMatch(s.substring(1), p.substring(1));
            &#125;
        &#125; else &#123;
            // if 2nd char in p is &#39;*&#39;, then iterate all position repetitions
            char repeatLetter = p.charAt(0);
            for (int i = 0; i &lt;= s.length(); i++) &#123;
                // i is the number of repetition of repeatLetter, start from 0
                if (i &gt; 0 &amp;&amp; repeatLetter != s.charAt(i - 1)
                        &amp;&amp; repeatLetter != &#39;.&#39;) &#123;
                    break;
                &#125; else &#123;
                    if (isMatch(s.substring(i), p.substring(2))) &#123;
                        return true;
                    &#125;
                &#125;
            &#125;
            return false;
        &#125;
    &#125;
&#125;
</code></pre>

        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>Permalink:</span>
                        <span><a href="https://mar2ndx.github.io/2014/04/29/pre-2017-2014-04-29-Regular-Expression-Matching/">https://mar2ndx.github.io/2014/04/29/pre-2017-2014-04-29-Regular-Expression-Matching/</a></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>License:</span>
                        <span>Copyright (c) 2019 <a target="_blank" rel="noopener" href="http://creativecommons.org/licenses/by-nc/4.0/">CC-BY-NC-4.0</a> LICENSE</span>
                    </p>
                
                
                     <p class="copyright-item">
                         <span>Slogan:</span>
                         <span>Do you believe in <strong>DESTINY</strong>?</span>
                     </p>
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2014/04/29/pre-2017-2014-04-29-Palindrome-Number/">[LeetCode 9] Palindrome Number </a>
            
            
            <a class="next" rel="next" href="/2014/04/29/pre-2017-2014-04-29-String-to-Integer-atoi/">[LeetCode 8] String to Integer (atoi) </a>
            
        </section>


    </article>
</div>

            </div>
            <footer id="footer" class="footer">
    <div class="copyright">
        <span>©  | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
</body>

</html>