<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
  <title>
    
    [Java OOP] Singleton, 3 implementations  丨
    

    typo
  </title>

  
  <link rel="shortcut icon" href="/icon.svg">
  

  <link rel="preconnect" href="https://cdnjs.cloudflare.com">
  
  <link id="theme" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-light.css">
  <script src="https://unpkg.com/@highlightjs/cdn-assets@11.9.0/highlight.min.js"></script>
  

  <!-- 字体 -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap" rel="stylesheet">

  
<link rel="stylesheet" href="/css/root.css">

  
<link rel="stylesheet" href="/css/style.css">

  
<link rel="stylesheet" href="/css/post.css">

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <header class="header">
  <section class="header-container">
    <a class="logo" href="/">Tech blog</a>
    <ul class="nav">
      
      <li><a href="/archives">archives</a></li>
      
      <li><a href="/about">about</a></li>
      
    </ul>
  </section>
</header>
  <main class="main">
    <article class="post">
  
  <div class="post-title">[Java OOP] Singleton, 3 implementations </div>
  <div class="post-meta">
    <div class="date">2014 August 20th</div>
    <div class="tags">
      
    </div>
  </div>
  

  <main class="post-content"><h3 id="Implement-Singlton"><a href="#Implement-Singlton" class="headerlink" title="Implement Singlton"></a>Implement Singlton</h3><p><a target="_blank" rel="noopener" href="http://javarevisited.blogspot.sg/2012/07/why-enum-singleton-are-better-in-java.html">3 ways</a> of writing Singleton.</p>
<h4 id="using-Enum"><a href="#using-Enum" class="headerlink" title="using Enum"></a>using Enum</h4><p>This is only available since Java 6.</p>
<pre><code>public enum Singleton_Enum &#123;
	INSTANCE;
&#125;
</code></pre>
<h4 id="using-double-checked-locking"><a href="#using-double-checked-locking" class="headerlink" title="using double checked locking"></a>using double checked locking</h4><p>This is <strong>lazy loaded thread-safe</strong> Singleton, which is popular during Java 5 (with the use of Volatile variable).</p>
<pre><code>public class Singleton_DoubleCheckedLocking implements Cloneable &#123;
	private static volatile Singleton_DoubleCheckedLocking INSTANCE;

	private Singleton_DoubleCheckedLocking() &#123;
	&#125;

	public static Singleton_DoubleCheckedLocking getInstance() &#123;
		if (INSTANCE == null) &#123;
			synchronized (Singleton_DoubleCheckedLocking.class) &#123;
				// double checking Singleton instance
				if (INSTANCE == null) &#123;
					INSTANCE = new Singleton_DoubleCheckedLocking();
				&#125;
			&#125;
		&#125;
		return INSTANCE;
	&#125;
&#125;
</code></pre>
<h4 id="using-static-factory-method"><a href="#using-static-factory-method" class="headerlink" title="using static factory method"></a>using static factory method</h4><p>Singleton instance is <a target="_blank" rel="noopener" href="http://javarevisited.blogspot.sg/2012/07/why-enum-singleton-are-better-in-java.html">static and final variable</a> it initialized when class is first loaded into memeory so creation of instance is inherently <strong>thread-safe</strong>.</p>
<pre><code>public class Singleton_StaticFactory &#123;
	// initailzed during class loading
	private static final Singleton_StaticFactory INSTANCE = new Singleton_StaticFactory();

	// to prevent creating another instance of Singleton
	private Singleton_StaticFactory() &#123;
	&#125;

	public static Singleton_StaticFactory getSingleton() &#123;
		return INSTANCE;
	&#125;
&#125;
</code></pre>
<h3 id="About-thread-safety"><a href="#About-thread-safety" class="headerlink" title="About thread-safety"></a>About thread-safety</h3><p><a target="_blank" rel="noopener" href="http://javarevisited.blogspot.sg/2012/12/how-to-create-thread-safe-singleton-in-java-example.html">Prior to Java 5</a> <strong>double checked locking</strong> mechanism is used to create thread-safe singleton in Java, which breaks if one Thread doesn’t see instance created by other thread at same time and eventually you will end up with more than one instance of Singleton class.</p>
<p>From Java 5 onwards <strong>volatile variable</strong> guarantee can be used to write thread safe singleton by using double checked locking pattern.</p>
<p>I personally don’t prefer that way as there are many other simpler alternatives like:</p>
<ol>
<li>using static field</li>
<li>using Enum</li>
</ol>
<h3 id="Q-A"><a href="#Q-A" class="headerlink" title="Q &amp; A"></a>Q &amp; A</h3><p>Question: How do you prevent for creating another instance of Singleton using clone() method?</p>
<p>Answer: Preferred way is not to implement Clonnable interface. And if you do, just throw Exception from clone() method as “Can not create clone of Singleton class”.</p>
</main>

</article>


<script src="/js/highlight.js"></script>

  </main>
  <footer class="footer">
  
  <span>Copyright © 2024 typo</span>
  
</footer>
  
<script src="/js/theme.js"></script>

</body>

</html>