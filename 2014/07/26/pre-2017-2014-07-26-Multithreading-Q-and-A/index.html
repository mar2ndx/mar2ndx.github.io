<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">





<title>[Design] Multithreading Q&amp;A | Tech blog</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


<meta name="generator" content="Hexo 7.3.0"></head>

<body>
    <script>
        // this function is used to check current theme before page loaded.
        (() => {
            const pagebody = document.getElementsByTagName('body')[0]

            function setTheme(status) {

                if (status === 'dark') {
                    window.sessionStorage.theme = 'dark'
                    pagebody.classList.add('dark-theme');

                } else if (status === 'light') {
                    window.sessionStorage.theme = 'light'
                    pagebody.classList.remove('dark-theme');
                }
            };

            setTheme(window.sessionStorage.theme)
        })();
    </script>

    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Bentham&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                <a class="menu-item" href="/archives">Posts</a>
                
                <a class="menu-item" href="/category">Categories</a>
                
                <a class="menu-item" href="/tag">Tags</a>
                
                <a class="menu-item" href="/about">About</a>
                
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">Bentham&#39;s Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">
                    <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M4.5 17.27q-.213 0-.356-.145T4 16.768t.144-.356t.356-.143h15q.213 0 .356.144q.144.144.144.357t-.144.356t-.356.143zm0-4.77q-.213 0-.356-.144T4 11.999t.144-.356t.356-.143h15q.213 0 .356.144t.144.357t-.144.356t-.356.143zm0-4.77q-.213 0-.356-.143Q4 7.443 4 7.23t.144-.356t.356-.143h15q.213 0 .356.144T20 7.23t-.144.356t-.356.144z"/></svg>
                    <svg class="close-icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><!-- Icon from Material Symbols Light by Google - https://github.com/google/material-design-icons/blob/master/LICENSE --><path fill="currentColor" d="m12 12.708l-5.246 5.246q-.14.14-.344.15t-.364-.15t-.16-.354t.16-.354L11.292 12L6.046 6.754q-.14-.14-.15-.344t.15-.364t.354-.16t.354.16L12 11.292l5.246-5.246q.14-.14.345-.15q.203-.01.363.15t.16.354t-.16.354L12.708 12l5.246 5.246q.14.14.15.345q.01.203-.15.363t-.354.16t-.354-.16z"/></svg>
                </div>
            </div>
            <div class="menu" id="mobile-menu">
                
                <a class="menu-item" href="/archives">Posts</a>
                
                <a class="menu-item" href="/category">Categories</a>
                
                <a class="menu-item" href="/tag">Tags</a>
                
                <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if (toggleMenu.classList.contains("active")) {
            toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        } else {
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
            <div class="main">
                <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    var tocbot_timer;
    var DEPTH_MAX = 6; // 为 6 时展开所有
    var tocbot_default_config = {
        tocSelector: '.tocbot-list',
        contentSelector: '.post-content',
        headingSelector: 'h1, h2, h3, h4, h5',
        orderedList: false,
        scrollSmooth: true,
        onClick: extend_click,
    };

    function extend_click() {
        clearTimeout(tocbot_timer);
        tocbot_timer = setTimeout(function() {
            tocbot.refresh(obj_merge(tocbot_default_config, {
                hasInnerContainers: true
            }));
        }, 420); // 这个值是由 tocbot 源码里定义的 scrollSmoothDuration 得来的
    }

    document.ready(function() {
        tocbot.init(obj_merge(tocbot_default_config, {
            collapseDepth: 1
        }));
    });

    function expand_toc() {
        var b = document.querySelector('.tocbot-toc-expand');
        var expanded = b.getAttribute('data-expanded');
        expanded ? b.removeAttribute('data-expanded') : b.setAttribute('data-expanded', true);
        tocbot.refresh(obj_merge(tocbot_default_config, {
            collapseDepth: expanded ? 1 : DEPTH_MAX
        }));
        b.innerText = expanded ? 'Expand all' : 'Collapse all';
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

    function obj_merge(target, source) {
        for (var item in source) {
            if (source.hasOwnProperty(item)) {
                target[item] = source[item];
            }
        }
        return target;
    }
</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">[Design] Multithreading Q&amp;A</h1>
            
                <div class="post-meta">
                    

                    
                        <span class="post-time">
                        Date: <a href="#">July 26, 2014&nbsp;&nbsp;0:00:00</a>
                        </span>
                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/categories/Design/">Design</a>
                            
                        </span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <h2 id="General-Q-A"><a href="#General-Q-A" class="headerlink" title="General Q &amp; A"></a>General Q &amp; A</h2><p><a target="_blank" rel="noopener" href="http://www.geeksforgeeks.org/mutex-vs-semaphore/">source</a></p>
<h4 id="Can-a-thread-acquire-more-than-one-lock-Mutex"><a href="#Can-a-thread-acquire-more-than-one-lock-Mutex" class="headerlink" title="Can a thread acquire more than one lock (Mutex)?"></a>Can a thread acquire more than one lock (Mutex)?</h4><p>Yes, if they need more resource.</p>
<h4 id="Can-a-mutex-be-locked-more-than-once"><a href="#Can-a-mutex-be-locked-more-than-once" class="headerlink" title="Can a mutex be locked more than once?"></a>Can a mutex be locked more than once?</h4><p>Unless it’s a recursive mutex, no.</p>
<p>A mutex is a lock.</p>
<h4 id="What-happens-if-a-non-recursive-mutex-is-locked-more-than-once"><a href="#What-happens-if-a-non-recursive-mutex-is-locked-more-than-once" class="headerlink" title="What happens if a non-recursive mutex is locked more than once?"></a>What happens if a non-recursive mutex is locked more than once?</h4><p>Deadlock.</p>
<p>Trying to lock the mutex again, it will enter into the waiting queue. But no other thread can unlock that mutex.</p>
<h4 id="Are-binary-semaphore-and-mutex-same"><a href="#Are-binary-semaphore-and-mutex-same" class="headerlink" title="Are binary semaphore and mutex same?"></a>Are binary semaphore and mutex same?</h4><p>No. One is <strong>signalling</strong>, another is <strong>locking mechanism</strong>.</p>
<p>A semaphore is <a target="_blank" rel="noopener" href="http://stackoverflow.com/a/2350628">more general concept</a> than mutex. A mutex is (almost) a special case of a semaphore.</p>
<h4 id="Why-use-mutex-and-critical-section"><a href="#Why-use-mutex-and-critical-section" class="headerlink" title="Why use mutex and critical section?"></a>Why use mutex and critical section?</h4><p>Critical section is group of instructions that need to be executed atomically.</p>
<p>The objective of mutex is atomic access of critical section.</p>
<h4 id="Can-we-acquire-mutex-semaphore-in-an-Interrupt-Service-Routine"><a href="#Can-we-acquire-mutex-semaphore-in-an-Interrupt-Service-Routine" class="headerlink" title="Can we acquire mutex&#x2F;semaphore in an Interrupt Service Routine?"></a>Can we acquire mutex&#x2F;semaphore in an Interrupt Service Routine?</h4><p>Yes, but very bad practise.</p>
<p>The ISR are meant be short, the call to mutex&#x2F;semaphore may block the current running thread. However, an ISR can signal a semaphore or unlock a mutex.</p>
<h4 id="What-is-thread-blocking-on-mutex-semaphore"><a href="#What-is-thread-blocking-on-mutex-semaphore" class="headerlink" title="What is thread blocking on mutex&#x2F;semaphore?"></a>What is thread blocking on mutex&#x2F;semaphore?</h4><p>When the resource is not available, the requesting thread will be moved from the running list of processor to the waiting list of the synchronization primitive.</p>
<p>When the resource is available, the higher priority thread on the waiting list will get resource (more precisely, it depends on the scheduling policies).</p>
<h4 id="Is-it-necessary-that-a-thread-must-block-when-resource-is-not-available"><a href="#Is-it-necessary-that-a-thread-must-block-when-resource-is-not-available" class="headerlink" title="Is it necessary that a thread must block when resource is not available?"></a>Is it necessary that a thread must block when resource is not available?</h4><p>No.</p>
<p>If the design is sure ‘what has to be done when resource is not available‘, the thread can take up that work (a different code branch). To support, application requirements the OS provides non-blocking API.</p>
<h2 id="Google-interview-questions"><a href="#Google-interview-questions" class="headerlink" title="Google interview questions"></a>Google interview questions</h2><p><a target="_blank" rel="noopener" href="http://www.chiefdelphi.com/forums/showthread.php?p=983786">source</a></p>
<h4 id="What-is-the-difference-between-a-mutex-and-a-semaphore-Which-one-would-you-use-to-protect-access-to-an-increment-operation"><a href="#What-is-the-difference-between-a-mutex-and-a-semaphore-Which-one-would-you-use-to-protect-access-to-an-increment-operation" class="headerlink" title="What is the difference between a mutex and a semaphore? Which one would you use to protect access to an increment operation?"></a>What is the difference between a mutex and a semaphore? Which one would you use to protect access to an increment operation?</h4><p><a target="_blank" rel="noopener" href="http://www.jacopretorius.net/2010/12/google-interview-questions-and-answers.html">A mutex</a> is used when only one thread or process is allowed to access a resource and a semaphore is used when only a certain set limit of threads or processes can access the shared resource.</p>
<p>It looks like a mutex is a binary semaphore. <strong>But the expected answer is mutex</strong>.</p>
<p><strong><a target="_blank" rel="noopener" href="http://www.chiefdelphi.com/forums/showthread.php?p=983786">A big differences</a> is that mutexes have the concept of “ownership”</strong>. Only the thread that owns the mutex (i.e. was the thread that originally claimed the mutex) can give it up. If another thread tries to free the mutex, this will cause an error. With semaphores, basically any thread is allowed to manipulate them.</p>
<h4 id="What-is-multithreaded-programming-What-is-a-deadlock"><a href="#What-is-multithreaded-programming-What-is-a-deadlock" class="headerlink" title="What is multithreaded programming? What is a deadlock?"></a>What is multithreaded programming? What is a deadlock?</h4><p><a target="_blank" rel="noopener" href="http://www.programsquare.com/2011/05/what-is-multithreaded-programming-what.html">Multithreading</a> as a widespread programming and execution model allows multiple threads to exist within the context of a single process.</p>
<p>These threads share the process’ resources but are able to execute independently.</p>
<p><strong>Deadlock refers to a specific condition when two or more processes are each waiting for the other to release a resource</strong>, or more than two processes are waiting for resources in a circular chain</p>
<p>In an operating system, a <a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Deadlock">deadlock is a situation</a> which occurs when a process or thread enters a waiting state because a resource requested is being held by another waiting process, which in turn is waiting for another resource.</p>

        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>Permalink:</span>
                        <span><a href="https://mar2ndx.github.io/2014/07/26/pre-2017-2014-07-26-Multithreading-Q-and-A/">https://mar2ndx.github.io/2014/07/26/pre-2017-2014-07-26-Multithreading-Q-and-A/</a></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>License:</span>
                        <span>Copyright (c) 2019 <a target="_blank" rel="noopener" href="http://creativecommons.org/licenses/by-nc/4.0/">CC-BY-NC-4.0</a> LICENSE</span>
                    </p>
                
                
                     <p class="copyright-item">
                         <span>Slogan:</span>
                         <span>Do you believe in <strong>DESTINY</strong>?</span>
                     </p>
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2014/07/27/pre-2017-2014-07-27-Sliding-Window-Maximum/">[LeetCode Plus] Sliding Window Maximum </a>
            
            
            <a class="next" rel="next" href="/2014/07/26/pre-2017-2014-07-26-Random-number-generate-question/">[Question] Random Number Generate Question</a>
            
        </section>


    </article>
</div>

            </div>
            <footer id="footer" class="footer">
    <div class="copyright">
        <span>©  | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
</body>

</html>